<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Definitive Guide to Knative Serving—A Deep Dive into Theory and Architecture | WeDAA</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wedaa.tech/docs/blog/2024/05/01/knative-serving-01"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="wedaa, prototyping, cloud native, comprehensive architectures"><meta data-rh="true" property="og:title" content="Definitive Guide to Knative Serving—A Deep Dive into Theory and Architecture | WeDAA"><meta data-rh="true" name="description" content="A Deep Dive into Theory and Architecture of Knative Serving"><meta data-rh="true" property="og:description" content="A Deep Dive into Theory and Architecture of Knative Serving"><meta data-rh="true" property="og:image" content="https://knative.dev/docs/community/images/knative-audience.svg"><meta data-rh="true" name="twitter:image" content="https://knative.dev/docs/community/images/knative-audience.svg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-05-01T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="microservices,architecture,cloud-native,Serverless,cloud computing,knative,kubernetes,Knative-serving"><link data-rh="true" rel="icon" href="/docs/img/logo.png"><link data-rh="true" rel="canonical" href="https://wedaa.tech/docs/blog/2024/05/01/knative-serving-01"><link data-rh="true" rel="alternate" href="https://wedaa.tech/docs/blog/2024/05/01/knative-serving-01" hreflang="en"><link data-rh="true" rel="alternate" href="https://wedaa.tech/docs/blog/2024/05/01/knative-serving-01" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="WeDAA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="WeDAA Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VFHMSWMVTQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VFHMSWMVTQ",{anonymize_ip:!0})</script><link rel="stylesheet" href="/docs/assets/css/styles.c5b1622a.css">
<script src="/docs/assets/js/runtime~main.4bb01194.js" defer="defer"></script>
<script src="/docs/assets/js/main.e45a3241.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/introduction/Introduction to WeDAA"><div class="navbar__logo"><img src="/docs/img/logo.png" alt="WeDAA Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/logo.png" alt="WeDAA Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">WeDAA</b></a><a class="navbar__item navbar__link" href="/docs/introduction/Introduction to WeDAA">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wedaa-tech/wedaa-tech.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2024/05/05/Bulkhead-Pattern">Bulkhead Pattern -&gt; Cell based architecture</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/docs/blog/2024/05/01/knative-serving-01">Definitive Guide to Knative Serving—A Deep Dive into Theory and Architecture</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2024/04/25/react-flow">Revolutionizing Software Development with React Flow</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2024/04/18/feature-flags">Unveiling the Power of Feature Flags in Software Development</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2024/04/17/Go-Micro">Microservice architecture using GoMicro</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="A Deep Dive into Theory and Architecture of Knative Serving"><link itemprop="image" href="https://knative.dev/docs/community/images/knative-audience.svg"><header><h1 class="title_f1Hy" itemprop="headline">Definitive Guide to Knative Serving—A Deep Dive into Theory and Architecture</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-05-01T00:00:00.000Z" itemprop="datePublished">May 1, 2024</time> · <!-- -->10 min read</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>If you missed the first installment of our Knative series, you can catch up by diving into our previous blog post:
<a href="https://www.wedaa.tech/docs/blog/2024/04/13/overview-on-knative" target="_blank" rel="noopener noreferrer">Dive into Knative—Explore Serverless with Kubernetes</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p><img loading="lazy" alt="Overview" src="/docs/assets/images/00-overview-864fc8c0625a8618b6b29f81448f516c.png" width="625" height="313" class="img_ev3q"></p><p align="center"><a href="https://technologyconversations.com/2020/08/19/serverless-computing-with-knative-and-containers-as-a-service-caas/" target="_blank" rel="noopener noreferrer">Technology Conversations</a></p><p></p>
<p>The key aspects and benefits of Knative Serving:</p>
<ol>
<li><strong>Serverless Platform</strong>: Knative Serving is a serverless platform built on top of Kubernetes.</li>
<li><strong>Deployment Simplification</strong>: It simplifies the deployment of containerized applications on Kubernetes.</li>
<li><strong>Auto-scaling</strong>: Automatically scales applications based on demand, ensuring optimal resource utilization.</li>
<li><strong>Traffic Management</strong>: Provides features for managing traffic routing, allowing seamless updates and rollbacks.</li>
<li><strong>Focus on Development</strong>: Abstracts away infrastructure management complexities, enabling developers to focus on writing and deploying code.</li>
<li><strong>Cloud-Native Applications</strong>: Facilitates the development of modern, scalable, and resilient cloud-native applications.</li>
</ol>
<p>For an introductory exploration of Knative Serving, delve into our dedicated <a href="https://www.wedaa.tech/docs/blog/2024/04/13/overview-on-knative#knative-serving" target="_blank" rel="noopener noreferrer">Knative Serving</a> section.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="knative-serving-architecture">Knative Serving Architecture<a href="#knative-serving-architecture" class="hash-link" aria-label="Direct link to Knative Serving Architecture" title="Direct link to Knative Serving Architecture">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-diagram">Architecture Diagram<a href="#architecture-diagram" class="hash-link" aria-label="Direct link to Architecture Diagram" title="Direct link to Architecture Diagram">​</a></h3>
<p>Knative Serving consists of several components forming the backbone of the Serverless Platform. This blog explains the high-level architecture of Knative Serving.</p>
<p><img loading="lazy" alt="Architecture" src="/docs/assets/images/01-architecture-f34a59cc6df015d89698eaaf7c37498f.png" width="650" height="614" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="components">Components<a href="#components" class="hash-link" aria-label="Direct link to Components" title="Direct link to Components">​</a></h3>
<ul>
<li><strong>Activator</strong>: The activator is part of the [data-plane]. It is responsible to queue incoming requests (if a Knative Service is scaled-to-zero). It communicates with the autoscaler to bring scaled-to-zero Services back up and forward the queued requests. Activator can also act as a request buffer to handle traffic bursts.</li>
<li><strong>Autoscaler</strong>: The autoscaler is responsible to scale the Knative Services based on configuration, metrics and incoming requests.</li>
<li><strong>Controller</strong>: The controller manages the state of Knative resources within the cluster. It watches several objects, manages the lifecycle of dependent     resources, and updates the resource state.</li>
<li><strong>Queue-Proxy</strong>:	The Queue-Proxy is a sidecar container in the Knative Service&#x27;s Pod. It is responsible to collect metrics and enforcing the desired concurrency when forwarding requests to the user&#x27;s container. It can also act as a queue if necessary, similar to the Activator.</li>
<li><strong>Webhooks</strong>:	Knative Serving has several webhooks responsible to validate and mutate Knative Resources.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="http-request-flows">HTTP Request Flows<a href="#http-request-flows" class="hash-link" aria-label="Direct link to HTTP Request Flows" title="Direct link to HTTP Request Flows">​</a></h3>
<p>This explains the behavior and flow of HTTP requests to an application which is running on Knative Serving.</p>
<p><img loading="lazy" alt="HTTP Request Flows" src="/docs/assets/images/02-http-request-flow-9ce25bf99935eeaf5fe92f4a2b9b15f6.png" width="938" height="436" class="img_ev3q"></p>
<ol>
<li><strong>Initial Request</strong>: When a user sends an HTTP request to your Knative service, it first hits the ingress gateway.</li>
<li><strong>Routing Decision</strong>: The ingress gateway examines the request to determine which Knative service should handle it based on the requested domain name.</li>
<li><strong>Service Activation</strong>: Knative Serving keeps your service deployed at all times. When a request arrives and no instances are running, it promptly activates a new instance by spinning up a pod.</li>
<li><strong>Scaling Decision</strong>: Knative Serving checks the current load and decides how many instances of the service need to be running to handle incoming requests efficiently.</li>
<li><strong>Activator Interaction</strong>: For the first-time request, it goes to the activator. The activator asks the auto scaler to scale up one pod to serve the initial request, ensuring rapid response and availability.</li>
<li><strong>Request Handling</strong>: The request is then forwarded to one of the instances of your service, where your application code processes it.</li>
<li><strong>Containerized Environment</strong>: Within each pod, there are two containers:<!-- -->
<ul>
<li>User Container: This container hosts your application code, serving user requests.</li>
<li>Queue Container: This container monitors metrics and observes concurrency levels.</li>
</ul>
</li>
<li><strong>Auto-scaling Based on Concurrency</strong>: When the concurrency exceeds the default level, the autoscaler spins up new pods to handle the increased concurrent requests, ensuring optimal performance.</li>
<li><strong>Response</strong>: After processing the request, your service generates a response, which is sent back through the same flow to the user who made the initial request.</li>
<li><strong>Scaling Down</strong>: If there is no more traffic or if the traffic decreases significantly, Knative Serving may scale down the number of running instances to save resources.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="revisions">Revisions<a href="#revisions" class="hash-link" aria-label="Direct link to Revisions" title="Direct link to Revisions">​</a></h3>
<ul>
<li>Revisions are Knative Serving resources representing snapshots of application code and configuration.</li>
<li>They are created automatically in response to updates in a Configuration spec.</li>
<li>Revisions cannot be directly created or updated; they are managed through Configuration changes.</li>
<li>Deletion of Revisions can be forced to handle resource leaks or remove problematic Revisions.</li>
<li>Revisions are generally immutable, but may reference mutable Kubernetes resources like ConfigMaps and Secrets.</li>
<li>Changes in Revision defaults can lead to syntactic mutations in Revisions, affecting configuration without altering their core behavior.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="autoscaling">Autoscaling<a href="#autoscaling" class="hash-link" aria-label="Direct link to Autoscaling" title="Direct link to Autoscaling">​</a></h3>
<p><img loading="lazy" alt="Kubernetes Autoscaling Options" src="/docs/assets/images/03-autoscaling-32d8341a0ce844ed806be8ea539a2a17.png" width="800" height="430" class="img_ev3q"></p><p align="center"><a href="https://platform9.com/blog/kubernetes-autoscaling-options-horizontal-pod-autoscaler-vertical-pod-autoscaler-and-cluster-autoscaler/" target="_blank" rel="noopener noreferrer">Kubernetes Autoscaling Options</a></p><p></p>
<p>Knative Serving provides automatic scaling, or autoscaling, for applications to match incoming demand. This is provided by default, by using the Knative Pod Autoscaler (KPA).</p>
<p>For example, if an application is receiving no traffic and scale to zero is enabled, Knative Serving scales the application down to zero replicas. If scaling to zero is disabled, the application is scaled down to the minimum number of replicas specified for applications on the cluster. Replicas are scaled up to meet demand if traffic to the application increases.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supported-autoscaler-types">Supported Autoscaler types<a href="#supported-autoscaler-types" class="hash-link" aria-label="Direct link to Supported Autoscaler types" title="Direct link to Supported Autoscaler types">​</a></h4>
<p>Knative Serving supports the implementation of Knative Pod Autoscaler (KPA) and Kubernetes&#x27; Horizontal Pod Autoscaler (HPA).</p>
<ul>
<li>Knative Pod Autoscaler (KPA)<!-- -->
<ul>
<li>Part of the Knative Serving core and enabled by default once Knative Serving is installed.</li>
<li>Supports scale to zero functionality.</li>
<li>Does not support CPU-based autoscaling.</li>
</ul>
</li>
<li>Horizontal Pod Autoscaler (HPA)<!-- -->
<ul>
<li>Not part of the Knative Serving core, and you must install Knative Serving first.</li>
<li>Does not support scale to zero functionality.</li>
<li>Supports CPU-based autoscaling.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="knative-serving-autoscaling-system">Knative Serving Autoscaling System<a href="#knative-serving-autoscaling-system" class="hash-link" aria-label="Direct link to Knative Serving Autoscaling System" title="Direct link to Knative Serving Autoscaling System">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apis">APIs<a href="#apis" class="hash-link" aria-label="Direct link to APIs" title="Direct link to APIs">​</a></h3>
<ol>
<li><strong>PodAutoscaler</strong> (PA):<!-- -->
<ul>
<li>API: <code>podautoscalers.autoscaling.internal.knative.dev</code></li>
<li>It&#x27;s an abstraction that encompasses all possible PodAutoscalers, with the default implementation being the Knative Pod Autoscaler (KPA).</li>
<li>The PodAutoscaler manages the <code>scaling target</code>, the <code>metric</code> used for scaling, and other <code>relevant inputs</code> for the autoscaling decision-making process.<!-- -->
<ol>
<li><strong>Scaling Target</strong>: The PodAutoscaler determines what resource it should scale. This could be the number of pods, CPU utilization, memory consumption, or any other metric that indicates the workload&#x27;s demand.</li>
<li><strong>Metric for Scaling</strong>: It specifies which metric or metrics should be used to make scaling decisions. For example, it might use CPU utilization to decide when to add or remove pods based on workload demand.</li>
<li><strong>Other Inputs</strong>: The PodAutoscaler considers additional factors beyond just the scaling metric. These could include constraints, policies, or thresholds that influence scaling decisions. For instance, it might have rules to prevent scaling beyond a certain limit or to ensure a minimum number of pods are always running.</li>
</ol>
</li>
<li>PodAutoscalers are automatically created from Revisions by default.</li>
</ul>
</li>
<li><strong>Metric</strong>:<!-- -->
<ul>
<li>API: <code>metrics.autoscaling.internal.knative.dev</code></li>
<li>This API controls the collector of the autoscaler, determining which service to scrape data from, how to aggregate it, and other related aspects.<!-- -->
<ol>
<li><strong>Collector Control</strong>: The API controls the collector component of the autoscaler. The collector is responsible for gathering data related to the performance and behavior of the services being monitored for autoscaling.</li>
<li><strong>Data Scraping</strong>: It determines which service or services the autoscaler should scrape data from. This involves collecting relevant metrics such as CPU utilization, request latency, or throughput from the specified services.</li>
<li><strong>Aggregation</strong>: The API defines how the collected data should be aggregated. This could involve calculating averages, sums, or other statistical measures over a specific time window to provide a meaningful representation of the service&#x27;s performance.</li>
<li><strong>Other Related Aspects</strong>: Beyond data collection and aggregation, the API likely handles other aspects such as data retention policies, thresholds for triggering scaling actions, and configurations for interacting with the autoscaler&#x27;s decision-making process.</li>
</ol>
</li>
<li>Metrics are automatically generated from PodAutoscalers by default.</li>
</ul>
</li>
<li><strong>ServerlessServices</strong> (SKS):<!-- -->
<ul>
<li>API: <code>serverlessservices.networking.internal.knative.dev</code></li>
<li>It&#x27;s an abstraction layer built on top of Kubernetes Services, managing the data flow and the switch between using the activator as a buffer or routing directly to application instances.</li>
<li>SKS creates two Kubernetes services for each revision: a public service and a private service.</li>
<li>The private service points to the application instances, while the public service endpoints are managed directly by the SKS reconciler.</li>
<li>SKS operates in two modes: Serve and Proxy.<!-- -->
<ol>
<li>In <strong>Serve mode</strong>, traffic flows directly to the revision&#x27;s pods.</li>
<li>In <strong>Proxy mode</strong>, traffic is directed to activators.</li>
</ol>
</li>
<li>ServerlessServices are created from PodAutoscalers.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-up-and-down-steady-state">Scaling up and down (steady state)<a href="#scaling-up-and-down-steady-state" class="hash-link" aria-label="Direct link to Scaling up and down (steady state)" title="Direct link to Scaling up and down (steady state)">​</a></h3>
<p><img loading="lazy" alt="steady state" src="/docs/assets/images/04-steady-state-62cf2df517223eaaedf233840e41a74c.png" width="783" height="591" class="img_ev3q"></p>
<ul>
<li><strong>Steady State Operation</strong>:<!-- -->
<ul>
<li>The autoscaler operates continuously at a steady state.</li>
<li>It regularly scrapes data from the currently active revision pods to monitor their performance.</li>
</ul>
</li>
<li><strong>Dynamic Adjustment</strong>:<!-- -->
<ul>
<li>As incoming requests flow into the system, the scraped values of performance metrics change accordingly.</li>
<li>Based on these changing metrics, the autoscaler dynamically adjusts the scale of the revision.</li>
</ul>
</li>
<li><strong>SKS Functionality</strong>:<!-- -->
<ul>
<li>The ServerlessServices (SKS) component keeps track of changes to the deployment&#x27;s size.</li>
<li>It achieves this by monitoring the private service associated with the deployment.</li>
</ul>
</li>
<li><strong>Public Service Update</strong>:<!-- -->
<ul>
<li>SKS updates the public service based on the changes detected in the deployment&#x27;s size.</li>
<li>This ensures that the public service endpoints accurately reflect the available instances of the revision.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-to-zero">Scaling to zero<a href="#scaling-to-zero" class="hash-link" aria-label="Direct link to Scaling to zero" title="Direct link to Scaling to zero">​</a></h3>
<p><img loading="lazy" alt="Scaling to zero" src="/docs/assets/images/05-scaling-to-zero-edbbc4a96b34af7d03439022eaf00ecc.png" width="811" height="500" class="img_ev3q"></p>
<ul>
<li><strong>Scaling to Zero Process</strong> (1):<!-- -->
<ul>
<li>A revision scales down to zero when there are no more requests in the system.</li>
<li>All data collected by the autoscaler from revision pods and the activator reports zero concurrency, indicating no active requests.</li>
</ul>
</li>
<li><strong>Activator Preparation</strong>:<!-- -->
<ul>
<li>Before removing the last pod of the revision, the system ensures that the activator is in the path and reachable.</li>
</ul>
</li>
<li><strong>Proxy Mode Activation</strong> (4.1):<!-- -->
<ul>
<li>The autoscaler, which initiated the decision to scale to zero, directs the SKS to switch to Proxy mode.</li>
<li>In Proxy mode, all incoming traffic is routed to the activators.</li>
</ul>
</li>
<li><strong>Public Service Probing</strong>:<!-- -->
<ul>
<li>The SKS&#x27;s public service is probed continuously to ensure it returns responses from the activator.</li>
<li>Once the public service reliably returns responses from the activator and a configurable grace period (set via scale-to-zero-grace-period) has elapsed,</li>
</ul>
</li>
<li><strong>Final Scaling Down</strong> (5):<!-- -->
<ul>
<li>The last pod of the revision is removed, marking the successful scaling down of the revision to zero instances.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-from-zero">Scaling from zero<a href="#scaling-from-zero" class="hash-link" aria-label="Direct link to Scaling from zero" title="Direct link to Scaling from zero">​</a></h3>
<p><img loading="lazy" alt="Scaling from zero" src="/docs/assets/images/06-scaling-from-zero-95be865fd7ac19f2617d836ffb91726b.png" width="770" height="527" class="img_ev3q"></p>
<ul>
<li><strong>Scaling Up Process</strong>:<!-- -->
<ul>
<li>If a revision is scaled to zero and a request arrives for it, the system needs to scale it up.</li>
<li>As the SKS is in Proxy mode, the request reaches the activator.</li>
</ul>
</li>
<li><strong>Request Handling</strong>:<!-- -->
<ul>
<li>The activator counts the incoming request and reports its appearance to the autoscaler (2.1).</li>
<li>It then buffers the request and monitors the SKS&#x27;s private service for endpoints to appear (2.2).</li>
</ul>
</li>
<li><strong>Autoscaling Cycle</strong> (3):<!-- -->
<ul>
<li>The autoscaler receives the metric from the activator and initiates an autoscaling cycle.</li>
<li>This process determines the desired number of pods based on the incoming request.</li>
</ul>
</li>
<li><strong>Scaling Decision</strong> (4):<!-- -->
<ul>
<li>The autoscaling process concludes that at least one pod is needed to handle the incoming request.</li>
</ul>
</li>
<li><strong>Scaling Up Instructions</strong> (5.1):<!-- -->
<ul>
<li>The autoscaler instructs the revision&#x27;s deployment to scale up to N &gt; 0 replicas to accommodate the increased demand.</li>
</ul>
</li>
<li><strong>Serve Mode Activation</strong> (5.2):<!-- -->
<ul>
<li>The autoscaler switches the SKS into Serve mode, directing traffic to the revision&#x27;s pods directly once they are up.</li>
</ul>
</li>
<li><strong>Endpoint Probing</strong>:<!-- -->
<ul>
<li>The activator monitors the SKS&#x27;s private service for the appearance of endpoints.</li>
<li>Once the endpoints come up and pass the probe successfully, the respective address is considered healthy and used to route the buffered request and any additional requests that arrived in the meantime (8.2).</li>
</ul>
</li>
<li><strong>Successful Scaling Up</strong>:<!-- -->
<ul>
<li>The revision has successfully scaled up from zero to handle the incoming request.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>In summary, we&#x27;ve explored the core concepts of Knative Serving, from its architecture to scaling mechanisms. Next, we&#x27;ll dive into practical implementation in our upcoming blog. Also, stay tuned for the integration of the serverless component into the <a href="https://app.wedaa.tech/" target="_blank" rel="noopener noreferrer">WeDAA</a> Platform, making prototyping and deployment faster and easier than ever.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/architecture">architecture</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-native">cloud-native</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/serverless">Serverless</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-computing">cloud computing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/knative">knative</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/kubernetes">kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/knative-serving">Knative-serving</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/blog/2024/05/05/Bulkhead-Pattern"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Bulkhead Pattern -&gt; Cell based architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/blog/2024/04/25/react-flow"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Revolutionizing Software Development with React Flow</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#knative-serving-architecture" class="table-of-contents__link toc-highlight">Knative Serving Architecture</a><ul><li><a href="#architecture-diagram" class="table-of-contents__link toc-highlight">Architecture Diagram</a></li><li><a href="#components" class="table-of-contents__link toc-highlight">Components</a></li><li><a href="#http-request-flows" class="table-of-contents__link toc-highlight">HTTP Request Flows</a></li><li><a href="#revisions" class="table-of-contents__link toc-highlight">Revisions</a></li><li><a href="#autoscaling" class="table-of-contents__link toc-highlight">Autoscaling</a></li></ul></li><li><a href="#knative-serving-autoscaling-system" class="table-of-contents__link toc-highlight">Knative Serving Autoscaling System</a><ul><li><a href="#apis" class="table-of-contents__link toc-highlight">APIs</a></li><li><a href="#scaling-up-and-down-steady-state" class="table-of-contents__link toc-highlight">Scaling up and down (steady state)</a></li><li><a href="#scaling-to-zero" class="table-of-contents__link toc-highlight">Scaling to zero</a></li><li><a href="#scaling-from-zero" class="table-of-contents__link toc-highlight">Scaling from zero</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/get-started/quickstart">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developers-guide/introduction">Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/wedaa-tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/orgs/wedaa-tech/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>