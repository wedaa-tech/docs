<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">7 posts tagged with &quot;microservices&quot; | WeDAA</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wedaa.tech/docs/img"><meta data-rh="true" name="twitter:image" content="https://wedaa.tech/docs/img"><meta data-rh="true" property="og:url" content="https://wedaa.tech/docs/blog/tags/microservices"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="wedaa, prototyping, cloud native, comprehensive architectures"><meta data-rh="true" property="og:title" content="7 posts tagged with &quot;microservices&quot; | WeDAA"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/docs/img/logo.png"><link data-rh="true" rel="canonical" href="https://wedaa.tech/docs/blog/tags/microservices"><link data-rh="true" rel="alternate" href="https://wedaa.tech/docs/blog/tags/microservices" hreflang="en"><link data-rh="true" rel="alternate" href="https://wedaa.tech/docs/blog/tags/microservices" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="WeDAA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="WeDAA Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VFHMSWMVTQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VFHMSWMVTQ",{anonymize_ip:!0})</script><link rel="stylesheet" href="/docs/assets/css/styles.c5b1622a.css">
<script src="/docs/assets/js/runtime~main.3f2ea15c.js" defer="defer"></script>
<script src="/docs/assets/js/main.43ed7bf5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/introduction/Introduction to WeDAA"><div class="navbar__logo"><img src="/docs/img/logo.png" alt="WeDAA Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/logo.png" alt="WeDAA Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">WeDAA</b></a><a class="navbar__item navbar__link" href="/docs/introduction/Introduction to WeDAA">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wedaa-tech/wedaa-tech.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2025/12/24/Avoiding-Double-L7-Trap">ALB vs NLB for Istio - Avoiding the Double L7 Trap</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2025/04/08/kong-apigateway">How WeDAA Beat Load Balancer Limits Using Kong API Gateway</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2024/05/05/Bulkhead-Pattern">Bulkhead Pattern -&gt; Cell based architecture</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2024/05/01/knative-serving-01">Definitive Guide to Knative Serving—A Deep Dive into Theory and Architecture</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/blog/2024/04/25/react-flow">Revolutionizing Software Development with React Flow</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>7 posts tagged with &quot;microservices&quot;</h1><a href="/docs/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Understanding L4 vs L7 Load Balancing in a Service Mesh"><link itemprop="image" href="https://www.wedaa.tech/docs/img/blog/ALBvsNLBIstio/ALBvsNLB_network_analogy.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/docs/blog/2025/12/24/Avoiding-Double-L7-Trap">ALB vs NLB for Istio - Avoiding the Double L7 Trap</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-12-25T00:00:00.000Z" itemprop="datePublished">December 25, 2025</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>When running <strong>Istio</strong> on Kubernetes (especially on <strong>AWS EKS</strong>), a common question is:</p>
<blockquote>
<p>Should I put an <strong>Application Load Balancer (ALB)</strong> or a <strong>Network Load Balancer (NLB)</strong> in front of Istio?</p>
</blockquote>
<p><img loading="lazy" alt="Istio on Kubernetes with load balancers" src="/docs/assets/images/Istio_on_k8s_with_elb-fe38a2be6af331b8c7eeb9b9fc1e0849.png" width="1536" height="1024" class="img_ev3q"></p>
<p>At first glance, both seem to work. Traffic reaches the cluster and the application responds.<br>
<!-- -->But once you understand <strong>Layer 4 vs Layer 7</strong> and how a <strong>service mesh</strong> is designed, the right choice becomes clear.</p>
<p>This post explains <strong>why NLB fits Istio better than ALB</strong> and how using ALB can lead to a <strong>double L7 anti-pattern</strong>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="l4-vs-l7-only-what-matters">L4 vs L7 (Only What Matters)<a href="#l4-vs-l7-only-what-matters" class="hash-link" aria-label="Direct link to L4 vs L7 (Only What Matters)" title="Direct link to L4 vs L7 (Only What Matters)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="layer-4-transport-layer">Layer 4 (Transport Layer)<a href="#layer-4-transport-layer" class="hash-link" aria-label="Direct link to Layer 4 (Transport Layer)" title="Direct link to Layer 4 (Transport Layer)">​</a></h3>
<p>Layer 4 is about <strong>connections</strong>, not requests.</p>
<p>It understands:</p>
<ul>
<li>TCP / UDP</li>
<li>IP addresses and ports</li>
</ul>
<p>It does <em>not</em> understand:</p>
<ul>
<li>HTTP paths</li>
<li>Headers</li>
<li>Hostnames</li>
</ul>
<p>Example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connect to 10.0.1.5:443</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>➡️ <strong>AWS NLB works at Layer 4</strong></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="layer-7-application-layer">Layer 7 (Application Layer)<a href="#layer-7-application-layer" class="hash-link" aria-label="Direct link to Layer 7 (Application Layer)" title="Direct link to Layer 7 (Application Layer)">​</a></h3>
<p>Layer 7 understands <strong>what the request means</strong>.</p>
<p>It understands:</p>
<ul>
<li>HTTP / HTTPS / gRPC</li>
<li>Paths like <code>/api/orders</code></li>
<li>Hosts like <code>app.example.com</code></li>
<li>Headers, retries, timeouts</li>
</ul>
<p>Example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET /api/orders</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>➡️ <strong>Istio (Envoy) works at Layer 7</strong><br>
<!-- -->➡️ <strong>AWS ALB also works at Layer 7</strong></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-istio-expects">What Istio Expects<a href="#what-istio-expects" class="hash-link" aria-label="Direct link to What Istio Expects" title="Direct link to What Istio Expects">​</a></h2>
<p>Istio is a <strong>service mesh</strong>, not just a proxy.</p>
<p>It controls:</p>
<ul>
<li>Routing</li>
<li>Traffic splitting</li>
<li>Retries and timeouts</li>
<li>mTLS and security policies</li>
<li>Observability</li>
</ul>
<p>All of this requires <strong>Layer 7 context</strong>.</p>
<p>So the key idea is:</p>
<blockquote>
<p><strong>Istio expects to be the single Layer 7 decision-maker.</strong></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="alb--istio-the-double-l7-trap">ALB + Istio: The Double L7 Trap<a href="#alb--istio-the-double-l7-trap" class="hash-link" aria-label="Direct link to ALB + Istio: The Double L7 Trap" title="Direct link to ALB + Istio: The Double L7 Trap">​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ALB (L7)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Istio Envoy (L7)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Application</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here’s the problem:</p>
<ul>
<li>ALB inspects and routes HTTP</li>
<li>Istio inspects and routes HTTP again</li>
<li>Routing logic is split across two systems</li>
<li>Health checks often conflict</li>
<li>TLS is usually terminated before Istio</li>
</ul>
<p>This creates unnecessary complexity and confusion.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nlb--istio-clean-separation">NLB + Istio: Clean Separation<a href="#nlb--istio-clean-separation" class="hash-link" aria-label="Direct link to NLB + Istio: Clean Separation" title="Direct link to NLB + Istio: Clean Separation">​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NLB (L4)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Istio Envoy (L7)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ↓</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Application</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this setup:</p>
<ul>
<li>NLB only forwards TCP traffic</li>
<li>Istio handles all HTTP logic</li>
<li>No overlapping responsibilities</li>
<li>Cleaner security and observability</li>
<li>Fewer edge-case failures</li>
</ul>
<p>This is the <strong>service-mesh-native design</strong>.</p>
<p><img loading="lazy" alt="ALB vs NLB with Istio — Avoiding the Double L7 Trap" src="/docs/assets/images/ALBvsNLB-b3050c15114b1f0631e10543581945df.png" width="1536" height="1024" class="img_ev3q"></p>
<p><em>Left: ALB + Istio introduces two Layer-7 decision points (the Double L7 Trap).<br>
<!-- -->Right: NLB forwards at Layer-4 while Istio remains the single Layer-7 authority.</em></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="simple-analogy">Simple Analogy<a href="#simple-analogy" class="hash-link" aria-label="Direct link to Simple Analogy" title="Direct link to Simple Analogy">​</a></h2>
<p><img loading="lazy" alt="ALB vs NLB network analogy" src="/docs/assets/images/ALBvsNLB_network_analogy-b3b13e725946cd39e794b45c1d3533eb.png" width="1536" height="1024" class="img_ev3q"></p>
<p><strong>ALB + Istio</strong></p>
<blockquote>
<p>Two traffic cops trying to control the same intersection.</p>
</blockquote>
<p><strong>NLB + Istio</strong></p>
<blockquote>
<p>One tunnel (NLB) and one traffic cop (Istio).</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="when-alb-can-still-make-sense">When ALB Can Still Make Sense<a href="#when-alb-can-still-make-sense" class="hash-link" aria-label="Direct link to When ALB Can Still Make Sense" title="Direct link to When ALB Can Still Make Sense">​</a></h2>
<p>ALB is fine if:</p>
<ul>
<li>You are not using Istio for ingress routing</li>
<li>You want AWS-managed L7 routing at the edge</li>
<li>Istio is used only for internal service-to-service traffic</li>
</ul>
<p>But if Istio manages ingress traffic, ALB becomes redundant.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="final-recommendation">Final Recommendation<a href="#final-recommendation" class="hash-link" aria-label="Direct link to Final Recommendation" title="Direct link to Final Recommendation">​</a></h2>
<p>For Istio on EKS:</p>
<ul>
<li>✅ Use <strong>NLB (Layer 4)</strong></li>
<li>✅ Let <strong>Istio control Layer 7</strong></li>
<li>❌ Avoid <strong>ALB + Istio ingress</strong></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-takeaway">Key Takeaway<a href="#key-takeaway" class="hash-link" aria-label="Direct link to Key Takeaway" title="Direct link to Key Takeaway">​</a></h2>
<blockquote>
<p><strong>A service mesh needs one Layer 7 brain.</strong><br>
<strong>Everything before it should stay simple and dumb.</strong></p>
</blockquote>
<p>That’s why <strong>NLB works best with Istio</strong>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/istio">istio</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/service-mesh">service-mesh</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/kubernetes">kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/eks">eks</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/aws">aws</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/nlb">nlb</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/alb">alb</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/load-balancer">load-balancer</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/l-4-vs-l-7">l4-vs-l7</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-architecture">cloud-architecture</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/platform-engineering">platform-engineering</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="How WeDAA Beat Load Balancer Limits Using Kong API Gateway"><link itemprop="image" href="https://i.imgur.com/kbgl7U1.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/docs/blog/2025/04/08/kong-apigateway">How WeDAA Beat Load Balancer Limits Using Kong API Gateway</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-05-29T00:00:00.000Z" itemprop="datePublished">May 29, 2025</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>We&#x27;re <a href="https://www.wedaa.tech/" target="_blank" rel="noopener noreferrer">WeDAA</a>, short for Well Defined Application Architecture—a platform that empowers developers and architects to visually prototype software architectures on a canvas. Whether you&#x27;re building enterprise applications, startup MVPs, or incubating new ideas, WeDAA helps you bootstrap non-functional requirements like APIs, microservices, and infrastructure in minutes instead of days.</p>
<p>Everything was going smoothly—until we hit a hard limit. Our hosting provider, Hetzner, imposed a frustrating restriction: their load balancers only allow five service mappings. For a platform like ours that depends on running dozens of services, this was a serious roadblock.</p>
<p><strong>Spoiler alert</strong>: Kong API Gateway came to our rescue. Here’s how we turned a rigid infrastructure limitation into a streamlined, scalable solution.</p>
<p><img loading="lazy" alt="WeDAA GATEWAY" src="/docs/assets/images/intro-b0d0fed550cf4a16217c612318fa1de6.png" width="1536" height="1024" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-backstory-whats-wedaa-anyway">The Backstory: What’s WeDAA Anyway?<a href="#the-backstory-whats-wedaa-anyway" class="hash-link" aria-label="Direct link to The Backstory: What’s WeDAA Anyway?" title="Direct link to The Backstory: What’s WeDAA Anyway?">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-visual-platform-for-modern-architecture">A Visual Platform for Modern Architecture<a href="#a-visual-platform-for-modern-architecture" class="hash-link" aria-label="Direct link to A Visual Platform for Modern Architecture" title="Direct link to A Visual Platform for Modern Architecture">​</a></h4>
<p><a href="https://www.wedaa.tech/" target="_blank" rel="noopener noreferrer">WeDAA</a> is like a LEGO set for software architecture—developers can visually design, connect, and deploy microservices without the heavy lifting of backend setup. It handles the non-functional groundwork so you can focus on building features.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="our-cloud-of-choice-hetzner">Our Cloud of Choice: Hetzner<a href="#our-cloud-of-choice-hetzner" class="hash-link" aria-label="Direct link to Our Cloud of Choice: Hetzner" title="Direct link to Our Cloud of Choice: Hetzner">​</a></h4>
<p><img loading="lazy" alt="Hetzner" src="data:image/png;base64,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gAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAI9IvD/17XthaT/NpEAAAAASUVORK5CYII=" width="472" height="180" class="img_ev3q"></p>
<p>When we launched, we chose <a href="https://www.hetzner.com/" target="_blank" rel="noopener noreferrer">Hetzner</a> for hosting. It’s fast, reliable, and super budget-friendly—which is a big deal when you&#x27;re bootstrapping or scaling quickly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-hetzner-cost-vs-features">Why Hetzner? Cost vs Features<a href="#why-hetzner-cost-vs-features" class="hash-link" aria-label="Direct link to Why Hetzner? Cost vs Features" title="Direct link to Why Hetzner? Cost vs Features">​</a></h4>
<p>For the price, Hetzner rocks. But not everything that glitters is gold. While compute and storage were amazing, their load balancer offering had… well, “quirks.”</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enter-the-challenge-microservices-meet-their-limit">Enter the Challenge: Microservices Meet Their Limit<a href="#enter-the-challenge-microservices-meet-their-limit" class="hash-link" aria-label="Direct link to Enter the Challenge: Microservices Meet Their Limit" title="Direct link to Enter the Challenge: Microservices Meet Their Limit">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="wedaas-need-for-scalability">WeDAA’s Need for Scalability<a href="#wedaas-need-for-scalability" class="hash-link" aria-label="Direct link to WeDAA’s Need for Scalability" title="Direct link to WeDAA’s Need for Scalability">​</a></h4>
<p>As a microservices platform, WeDAA doesn’t run one or two services—we run dozens, sometimes more. Each service typically needs to be exposed externally or internally in a managed way.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancers-and-path-based-routing-whats-the-deal">Load Balancers and Path-Based Routing: What’s the Deal?<a href="#load-balancers-and-path-based-routing-whats-the-deal" class="hash-link" aria-label="Direct link to Load Balancers and Path-Based Routing: What’s the Deal?" title="Direct link to Load Balancers and Path-Based Routing: What’s the Deal?">​</a></h4>
<p>Normally, you’d use a path-based routing strategy.</p>
<p><img loading="lazy" alt="Path-based routing strategy" src="/docs/assets/images/path-based-routing-043223633f2b13eee8ecfead6222c2a6.png" width="600" height="600" class="img_ev3q"></p>
<p>Like this:</p>
<ul>
<li>
<p><code>/auth</code> → Authentication Service</p>
</li>
<li>
<p><code>/billing</code> → Billing Service</p>
</li>
<li>
<p><code>/notifications</code> → Notification Service</p>
</li>
</ul>
<p>Simple, clean, and only one public-facing endpoint required.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hetzners-load-balancer-limitation">Hetzner’s Load Balancer Limitation<a href="#hetzners-load-balancer-limitation" class="hash-link" aria-label="Direct link to Hetzner’s Load Balancer Limitation" title="Direct link to Hetzner’s Load Balancer Limitation">​</a></h4>
<p>But here’s where it broke down: Hetzner’s load balancers don’t support path-based routing. Oof.</p>
<p>Only 5 Port Mappings? Seriously?
Instead, you have to map services by port. So if your LB is lb11, you can only do stuff like:</p>
<ul>
<li>
<p>Port 8080 → Auth</p>
</li>
<li>
<p>Port 8081 → Billing</p>
</li>
<li>
<p>Port 8082 → Notifications</p>
</li>
</ul>
<p>...and so on—but only 5 of these mappings allowed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancer-bottleneck-our-initial-struggle">Load Balancer Bottleneck: Our Initial Struggle<a href="#load-balancer-bottleneck-our-initial-struggle" class="hash-link" aria-label="Direct link to Load Balancer Bottleneck: Our Initial Struggle" title="Direct link to Load Balancer Bottleneck: Our Initial Struggle">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="trying-to-squeeze-multiple-services-behind-one-lb">Trying to Squeeze Multiple Services Behind One LB<a href="#trying-to-squeeze-multiple-services-behind-one-lb" class="hash-link" aria-label="Direct link to Trying to Squeeze Multiple Services Behind One LB" title="Direct link to Trying to Squeeze Multiple Services Behind One LB">​</a></h4>
<p>You can see where this is going. We had way more than 5 services.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="options-we-considered">Options We Considered<a href="#options-we-considered" class="hash-link" aria-label="Direct link to Options We Considered" title="Direct link to Options We Considered">​</a></h4>
<p>We brainstormed all possible hacks:</p>
<ul>
<li>
<p>Buy a bigger load balancer (was an option—but the cost jumped fast)</p>
</li>
<li>
<p>Spin up more LBs (costly and messy)</p>
</li>
<li>
<p>Use a reverse proxy manually (yikes—complex maintenance)</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="all-roads-led-to-cost--complexity">All Roads Led to Cost &amp; Complexity<a href="#all-roads-led-to-cost--complexity" class="hash-link" aria-label="Direct link to All Roads Led to Cost &amp; Complexity" title="Direct link to All Roads Led to Cost &amp; Complexity">​</a></h4>
<p>Every workaround added either cost, technical debt, or overhead. We needed something smarter—a gateway between our load balancer and services.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="discovering-a-smarter-way-say-hello-to-kong-api-gateway">Discovering a Smarter Way: Say Hello to Kong API Gateway<a href="#discovering-a-smarter-way-say-hello-to-kong-api-gateway" class="hash-link" aria-label="Direct link to Discovering a Smarter Way: Say Hello to Kong API Gateway" title="Direct link to Discovering a Smarter Way: Say Hello to Kong API Gateway">​</a></h2>
<p><img loading="lazy" src="https://miro.medium.com/v2/resize:fit:1020/1*vi1keg-mSEHuQCMcPK_orw.png" alt="Kong API Gateway" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-kong-api-gateway-anyway">What is Kong API Gateway, Anyway?<a href="#what-is-kong-api-gateway-anyway" class="hash-link" aria-label="Direct link to What is Kong API Gateway, Anyway?" title="Direct link to What is Kong API Gateway, Anyway?">​</a></h4>
<p><a href="https://docs.konghq.com/gateway/3.10.x/get-started/" target="_blank" rel="noopener noreferrer">Kong Gateway</a> is a lightweight, fast, and flexible cloud-native API gateway. Kong Gateway sits in front of your service applications, dynamically controlling, analyzing, and routing requests and responses. Kong Gateway implements your API traffic policies by using a flexible, low-code, plugin-based approach.</p>
<p>It&#x27;s like a digital traffic cop that decides where to send API requests based on path, headers, method—you name it.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-kong-helped-us-bypass-lb-limitations">How Kong Helped Us Bypass LB Limitations<a href="#how-kong-helped-us-bypass-lb-limitations" class="hash-link" aria-label="Direct link to How Kong Helped Us Bypass LB Limitations" title="Direct link to How Kong Helped Us Bypass LB Limitations">​</a></h4>
<p>With Kong sitting behind the load balancer, we only needed to expose one service—Kong itself. Then Kong handled internal routing to all our microservices based on the URL path.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="one-service-multiple-paths">One Service, Multiple Paths<a href="#one-service-multiple-paths" class="hash-link" aria-label="Direct link to One Service, Multiple Paths" title="Direct link to One Service, Multiple Paths">​</a></h4>
<p>Boom. Now instead of mapping 5 different ports on the LB, we had:</p>
<ul>
<li>
<p>lb11:443 → Kong</p>
<ul>
<li><code>/auth</code>          → Auth Service</li>
<li><code>/billing</code>       → Billing Service</li>
<li><code>/notifications</code> → Notification Service</li>
<li><code>/anything</code>      → Any Service We Wanted</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="internal-routing-made-simple">Internal Routing Made Simple<a href="#internal-routing-made-simple" class="hash-link" aria-label="Direct link to Internal Routing Made Simple" title="Direct link to Internal Routing Made Simple">​</a></h4>
<p>All services were registered with Kong. We configured routing rules, and it took care of the rest. No extra LBs. No extra cost.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-real-world-architecture-shift">A Real-World Architecture Shift<a href="#a-real-world-architecture-shift" class="hash-link" aria-label="Direct link to A Real-World Architecture Shift" title="Direct link to A Real-World Architecture Shift">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="before-kong-chaos">Before Kong: Chaos<a href="#before-kong-chaos" class="hash-link" aria-label="Direct link to Before Kong: Chaos" title="Direct link to Before Kong: Chaos">​</a></h4>
<p>Dozens of services, all needing public access, but limited to 5. It was like trying to stuff an elephant into a mini-fridge.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="after-kong-clarity">After Kong: Clarity<a href="#after-kong-clarity" class="hash-link" aria-label="Direct link to After Kong: Clarity" title="Direct link to After Kong: Clarity">​</a></h4>
<p>Now it’s:</p>
<p>Hetzner LB → Kong → All internal microservices</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Internet] → [Hetzner LB] → [Kong API Gateway] → [Service A, B, C...Z]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Clean, scalable, and way easier to manage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="would-we-do-it-again-100-yes">Would We Do It Again? 100% Yes<a href="#would-we-do-it-again-100-yes" class="hash-link" aria-label="Direct link to Would We Do It Again? 100% Yes" title="Direct link to Would We Do It Again? 100% Yes">​</a></h2>
<p><img loading="lazy" alt="Hetzner" src="/docs/assets/images/developer-8c0b51b8c38d8d1c8e10b3c23cd1d90a.png" width="1800" height="1355" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scalability-without-extra-costs">Scalability Without Extra Costs<a href="#scalability-without-extra-costs" class="hash-link" aria-label="Direct link to Scalability Without Extra Costs" title="Direct link to Scalability Without Extra Costs">​</a></h4>
<ul>
<li>We’re saving $$$ by not buying extra load balancers.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="future-proofing-the-platform">Future-Proofing the Platform<a href="#future-proofing-the-platform" class="hash-link" aria-label="Direct link to Future-Proofing the Platform" title="Direct link to Future-Proofing the Platform">​</a></h4>
<ul>
<li>Need to add 10 more services? 50? No problem—Kong’s got it.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="faster-deployments">Faster Deployments<a href="#faster-deployments" class="hash-link" aria-label="Direct link to Faster Deployments" title="Direct link to Faster Deployments">​</a></h4>
<ul>
<li>New service? Register with Kong, deploy, and done. No port juggling.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-up-kong-api-gateway--game-changer-in-our-stack">Wrapping Up: Kong API Gateway – Game-Changer in Our Stack<a href="#wrapping-up-kong-api-gateway--game-changer-in-our-stack" class="hash-link" aria-label="Direct link to Wrapping Up: Kong API Gateway – Game-Changer in Our Stack" title="Direct link to Wrapping Up: Kong API Gateway – Game-Changer in Our Stack">​</a></h2>
<p>If you&#x27;re running multiple services and your cloud provider’s load balancer has limitations, Kong can help. It did the job for us—quickly and without adding complexity.</p>
<p>What started as a problem with too many services turned into a simple solution. Now, Kong is a key part of our setup—and we’re not looking back.</p>
<p><em>👉 In our next blog, we’ll show you how to configure Kong API Gateway and use it in your microservices architecture step by step—stay tuned!</em></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/architecture">architecture</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/api-gateway">api gateway</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/kong-gateway">kong gateway</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/load-balancer">load balancer</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/hetzner">hetzner</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/path-based-routing">path based routing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-infrastructure">cloud infrastructure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/scaling-microservices">scaling microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-cost-optimization">cloud cost optimization</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/infrastructure-challenges">infrastructure challenges</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/backend-architecture">backend architecture</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/platform-engineering">platform engineering</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/api-management">api management</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Understanding cell based architecture"><link itemprop="image" href="https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fea266d-829c-4dad-955a-c6905360448a_800x500.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/docs/blog/2024/05/05/Bulkhead-Pattern">Bulkhead Pattern -&gt; Cell based architecture</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-05T00:00:00.000Z" itemprop="datePublished">May 5, 2024</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cell-based-architecture">Cell based architecture<a href="#cell-based-architecture" class="hash-link" aria-label="Direct link to Cell based architecture" title="Direct link to Cell based architecture">​</a></h2>
<p><img loading="lazy" alt="Cell based architecture" src="/docs/assets/images/00-cell-based-architecture-5d2fff7cd24c4d52e1a2d82ffea7183c.png" width="1498" height="1240" class="img_ev3q"></p>
<p>Bulkhead or Cell-based architecture is an architectural pattern adopted for constructing highly available, scalable, and fault-tolerant enterprise applications.</p>
<p>The concept of the bulkhead pattern draws inspiration from the architecture of ship hulls, wherein the hull is divided into multiple cells or sections to prevent the entire ship from sinking if one section is damaged.</p>
<p><img loading="lazy" alt="ship hulls" src="/docs/assets/images/01-ship-hulls-51f991e8f3a7a94a8fd3072b6f8bfaab.png" width="2636" height="1860" class="img_ev3q"></p><p align="center">Vertical Partitioning of Walls dividing the Ship’s hull</p><p></p>
<p>In the bulkhead architecture approach, ships manage the risk of sinking by isolating compromised compartments. The vertical partitioning of walls divides the ship&#x27;s interior into self-contained, watertight compartments, aiming to contain a hull breach within a specific section of the ship.</p>
<p>A similar concept is applied when designing scalable enterprise applications having dynamic workload, known as cell-based architecture.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-components-of-cell-based-architecture">Key Components of Cell Based Architecture<a href="#key-components-of-cell-based-architecture" class="hash-link" aria-label="Direct link to Key Components of Cell Based Architecture" title="Direct link to Key Components of Cell Based Architecture">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cell-router">Cell Router<a href="#cell-router" class="hash-link" aria-label="Direct link to Cell Router" title="Direct link to Cell Router">​</a></h3>
<p><img loading="lazy" alt="Cell Router" src="/docs/assets/images/02-cell-router-9983f6c0a85397a40cb6f96aba2c0a96.png" width="501" height="310" class="img_ev3q"></p>
<p>A cell router is a key component in a cell-based architecture. Traffic to every individual cell is routed through cell router. If a cell fails, only the traffic directed to that cell will be impacted. In short impact on the system will be minimal. The cell router is responsible for receiving the request, determining their destination based on cell partitioning algorithms, and then forwarding them towards the destination cell.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="blast-radius">Blast Radius<a href="#blast-radius" class="hash-link" aria-label="Direct link to Blast Radius" title="Direct link to Blast Radius">​</a></h3>
<p><img loading="lazy" alt="Blast Radius" src="/docs/assets/images/03-blast-radius-57c403b1bf263a7900a54287f42e06e6.png" width="451" height="501" class="img_ev3q"></p>
<p>Represents the area or range of systems, components, or processes that may be affected directly or indirectly by a single cell failure event. For example, if a system is built with four cells and any service in a cell goes down only the 25% of traffic will be affected. So, the blast radius is approximate 25% here.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="traffic-distribution">Traffic distribution<a href="#traffic-distribution" class="hash-link" aria-label="Direct link to Traffic distribution" title="Direct link to Traffic distribution">​</a></h3>
<p>Cell router plays a critical role in orchestrating traffic distribution among cells in cell-based architecture. Traffic distribution works by routing incoming requests to the appropriate cell or service instance based on predefined routing rules or policies. The cells get partitioned using a partition key. A simple or composite partition key can be used to distribute the traffic between cells. the partitioning strategy could be ranging partitioning, hash partitioning, or list partitioning. The chosen partitioning strategy will influence how the partition key is used to distribute traffic across partitions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="self-contained-unit-cell">Self-Contained Unit (Cell)<a href="#self-contained-unit-cell" class="hash-link" aria-label="Direct link to Self-Contained Unit (Cell)" title="Direct link to Self-Contained Unit (Cell)">​</a></h3>
<p><img loading="lazy" alt="Self-Contained Unit (Cell)" src="/docs/assets/images/04-cell-ba18e4122c00ec21541821b01f2a3969.png" width="291" height="491" class="img_ev3q"></p>
<p>Complete in itself modules are the first-class citizen of any cell-based architecture. Such modules are the one which serves the logical / business purpose of a feature or service along with non-functional entities around it. Such as API’s, load balancer and database. In short, a cell in a cell-based architecture is self-contained and self- sustainable instance of an application which can be deployed, scaled, and observed independently. Cells are isolated with each other at logical level, failure of a cell does not affect other cells and reduces the overall impact to software. With the cell-based architecture a cell does not share encompassed services state with other cells in the system.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cell-health-check">Cell Health Check<a href="#cell-health-check" class="hash-link" aria-label="Direct link to Cell Health Check" title="Direct link to Cell Health Check">​</a></h3>
<p>Before forwarding the request, the cell router layer may perform health checks on the target cell or service instance to ensure that cell can handle the request. If the target instance is unhealthy or unavailable, the router may reroute the request to a healthy cell or trigger automatic recovery mechanisms.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="database-replication">Database Replication<a href="#database-replication" class="hash-link" aria-label="Direct link to Database Replication" title="Direct link to Database Replication">​</a></h3>
<p><img loading="lazy" alt="Database Replication" src="/docs/assets/images/05-db-replication-cc85114ba7117e769c5fb6795a8f59b6.png" width="1999" height="1143" class="img_ev3q"></p>
<p>In cell-based architecture Database replication is used to synchronize data between cells to ensure consistency and availability. Changes made to data in one cell need to be propagated to other cells where that data is relevant. Replication mechanisms vary based on the specific database technology used, but they involve replicating data changes asynchronously or semi-synchronously between cells.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-cell-based-architecture">When to use Cell Based Architecture?<a href="#when-to-use-cell-based-architecture" class="hash-link" aria-label="Direct link to When to use Cell Based Architecture?" title="Direct link to When to use Cell Based Architecture?">​</a></h2>
<p>For systems that require high scalability and the ability to handle large volumes of traffic, cell-based architecture allows for horizontal scaling by adding more cells as needed.</p>
<p>Applications with dynamic workloads that require rapid scaling up or down based on demand, cell-based architecture provides the flexibility to scale individual cells independently, optimizing resource utilization.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/architecture">architecture</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="A Deep Dive into Theory and Architecture of Knative Serving"><link itemprop="image" href="https://www.wedaa.tech/docs/img/blog/knative-serving-01/00-overview.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/docs/blog/2024/05/01/knative-serving-01">Definitive Guide to Knative Serving—A Deep Dive into Theory and Architecture</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-01T00:00:00.000Z" itemprop="datePublished">May 1, 2024</time> · <!-- -->10 min read</div></header><div class="markdown" itemprop="articleBody"><p>If you missed the first installment of our Knative series, you can catch up by diving into our previous blog post:
<a href="https://www.wedaa.tech/docs/blog/2024/04/13/overview-on-knative" target="_blank" rel="noopener noreferrer">Dive into Knative—Explore Serverless with Kubernetes</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p><img loading="lazy" alt="Overview" src="/docs/assets/images/00-overview-864fc8c0625a8618b6b29f81448f516c.png" width="625" height="313" class="img_ev3q"></p><p align="center"><a href="https://technologyconversations.com/2020/08/19/serverless-computing-with-knative-and-containers-as-a-service-caas/" target="_blank" rel="noopener noreferrer">Technology Conversations</a></p><p></p>
<p>The key aspects and benefits of Knative Serving:</p>
<ol>
<li><strong>Serverless Platform</strong>: Knative Serving is a serverless platform built on top of Kubernetes.</li>
<li><strong>Deployment Simplification</strong>: It simplifies the deployment of containerized applications on Kubernetes.</li>
<li><strong>Auto-scaling</strong>: Automatically scales applications based on demand, ensuring optimal resource utilization.</li>
<li><strong>Traffic Management</strong>: Provides features for managing traffic routing, allowing seamless updates and rollbacks.</li>
<li><strong>Focus on Development</strong>: Abstracts away infrastructure management complexities, enabling developers to focus on writing and deploying code.</li>
<li><strong>Cloud-Native Applications</strong>: Facilitates the development of modern, scalable, and resilient cloud-native applications.</li>
</ol>
<p>For an introductory exploration of Knative Serving, delve into our dedicated <a href="https://www.wedaa.tech/docs/blog/2024/04/13/overview-on-knative#knative-serving" target="_blank" rel="noopener noreferrer">Knative Serving</a> section.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="knative-serving-architecture">Knative Serving Architecture<a href="#knative-serving-architecture" class="hash-link" aria-label="Direct link to Knative Serving Architecture" title="Direct link to Knative Serving Architecture">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-diagram">Architecture Diagram<a href="#architecture-diagram" class="hash-link" aria-label="Direct link to Architecture Diagram" title="Direct link to Architecture Diagram">​</a></h3>
<p>Knative Serving consists of several components forming the backbone of the Serverless Platform. This blog explains the high-level architecture of Knative Serving.</p>
<p><img loading="lazy" alt="Architecture" src="/docs/assets/images/01-architecture-f34a59cc6df015d89698eaaf7c37498f.png" width="650" height="614" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="components">Components<a href="#components" class="hash-link" aria-label="Direct link to Components" title="Direct link to Components">​</a></h3>
<ul>
<li><strong>Activator</strong>: The activator is part of the [data-plane]. It is responsible to queue incoming requests (if a Knative Service is scaled-to-zero). It communicates with the autoscaler to bring scaled-to-zero Services back up and forward the queued requests. Activator can also act as a request buffer to handle traffic bursts.</li>
<li><strong>Autoscaler</strong>: The autoscaler is responsible to scale the Knative Services based on configuration, metrics and incoming requests.</li>
<li><strong>Controller</strong>: The controller manages the state of Knative resources within the cluster. It watches several objects, manages the lifecycle of dependent     resources, and updates the resource state.</li>
<li><strong>Queue-Proxy</strong>:	The Queue-Proxy is a sidecar container in the Knative Service&#x27;s Pod. It is responsible to collect metrics and enforcing the desired concurrency when forwarding requests to the user&#x27;s container. It can also act as a queue if necessary, similar to the Activator.</li>
<li><strong>Webhooks</strong>:	Knative Serving has several webhooks responsible to validate and mutate Knative Resources.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="http-request-flows">HTTP Request Flows<a href="#http-request-flows" class="hash-link" aria-label="Direct link to HTTP Request Flows" title="Direct link to HTTP Request Flows">​</a></h3>
<p>This explains the behavior and flow of HTTP requests to an application which is running on Knative Serving.</p>
<p><img loading="lazy" alt="HTTP Request Flows" src="/docs/assets/images/02-http-request-flow-9ce25bf99935eeaf5fe92f4a2b9b15f6.png" width="938" height="436" class="img_ev3q"></p>
<ol>
<li><strong>Initial Request</strong>: When a user sends an HTTP request to your Knative service, it first hits the ingress gateway.</li>
<li><strong>Routing Decision</strong>: The ingress gateway examines the request to determine which Knative service should handle it based on the requested domain name.</li>
<li><strong>Service Activation</strong>: Knative Serving keeps your service deployed at all times. When a request arrives and no instances are running, it promptly activates a new instance by spinning up a pod.</li>
<li><strong>Scaling Decision</strong>: Knative Serving checks the current load and decides how many instances of the service need to be running to handle incoming requests efficiently.</li>
<li><strong>Activator Interaction</strong>: For the first-time request, it goes to the activator. The activator asks the auto scaler to scale up one pod to serve the initial request, ensuring rapid response and availability.</li>
<li><strong>Request Handling</strong>: The request is then forwarded to one of the instances of your service, where your application code processes it.</li>
<li><strong>Containerized Environment</strong>: Within each pod, there are two containers:<!-- -->
<ul>
<li>User Container: This container hosts your application code, serving user requests.</li>
<li>Queue Container: This container monitors metrics and observes concurrency levels.</li>
</ul>
</li>
<li><strong>Auto-scaling Based on Concurrency</strong>: When the concurrency exceeds the default level, the autoscaler spins up new pods to handle the increased concurrent requests, ensuring optimal performance.</li>
<li><strong>Response</strong>: After processing the request, your service generates a response, which is sent back through the same flow to the user who made the initial request.</li>
<li><strong>Scaling Down</strong>: If there is no more traffic or if the traffic decreases significantly, Knative Serving may scale down the number of running instances to save resources.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="revisions">Revisions<a href="#revisions" class="hash-link" aria-label="Direct link to Revisions" title="Direct link to Revisions">​</a></h3>
<ul>
<li>Revisions are Knative Serving resources representing snapshots of application code and configuration.</li>
<li>They are created automatically in response to updates in a Configuration spec.</li>
<li>Revisions cannot be directly created or updated; they are managed through Configuration changes.</li>
<li>Deletion of Revisions can be forced to handle resource leaks or remove problematic Revisions.</li>
<li>Revisions are generally immutable, but may reference mutable Kubernetes resources like ConfigMaps and Secrets.</li>
<li>Changes in Revision defaults can lead to syntactic mutations in Revisions, affecting configuration without altering their core behavior.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="autoscaling">Autoscaling<a href="#autoscaling" class="hash-link" aria-label="Direct link to Autoscaling" title="Direct link to Autoscaling">​</a></h3>
<p><img loading="lazy" alt="Kubernetes Autoscaling Options" src="/docs/assets/images/03-autoscaling-32d8341a0ce844ed806be8ea539a2a17.png" width="800" height="430" class="img_ev3q"></p><p align="center"><a href="https://platform9.com/blog/kubernetes-autoscaling-options-horizontal-pod-autoscaler-vertical-pod-autoscaler-and-cluster-autoscaler/" target="_blank" rel="noopener noreferrer">Kubernetes Autoscaling Options</a></p><p></p>
<p>Knative Serving provides automatic scaling, or autoscaling, for applications to match incoming demand. This is provided by default, by using the Knative Pod Autoscaler (KPA).</p>
<p>For example, if an application is receiving no traffic and scale to zero is enabled, Knative Serving scales the application down to zero replicas. If scaling to zero is disabled, the application is scaled down to the minimum number of replicas specified for applications on the cluster. Replicas are scaled up to meet demand if traffic to the application increases.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supported-autoscaler-types">Supported Autoscaler types<a href="#supported-autoscaler-types" class="hash-link" aria-label="Direct link to Supported Autoscaler types" title="Direct link to Supported Autoscaler types">​</a></h4>
<p>Knative Serving supports the implementation of Knative Pod Autoscaler (KPA) and Kubernetes&#x27; Horizontal Pod Autoscaler (HPA).</p>
<ul>
<li>Knative Pod Autoscaler (KPA)<!-- -->
<ul>
<li>Part of the Knative Serving core and enabled by default once Knative Serving is installed.</li>
<li>Supports scale to zero functionality.</li>
<li>Does not support CPU-based autoscaling.</li>
</ul>
</li>
<li>Horizontal Pod Autoscaler (HPA)<!-- -->
<ul>
<li>Not part of the Knative Serving core, and you must install Knative Serving first.</li>
<li>Does not support scale to zero functionality.</li>
<li>Supports CPU-based autoscaling.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="knative-serving-autoscaling-system">Knative Serving Autoscaling System<a href="#knative-serving-autoscaling-system" class="hash-link" aria-label="Direct link to Knative Serving Autoscaling System" title="Direct link to Knative Serving Autoscaling System">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apis">APIs<a href="#apis" class="hash-link" aria-label="Direct link to APIs" title="Direct link to APIs">​</a></h3>
<ol>
<li><strong>PodAutoscaler</strong> (PA):<!-- -->
<ul>
<li>API: <code>podautoscalers.autoscaling.internal.knative.dev</code></li>
<li>It&#x27;s an abstraction that encompasses all possible PodAutoscalers, with the default implementation being the Knative Pod Autoscaler (KPA).</li>
<li>The PodAutoscaler manages the <code>scaling target</code>, the <code>metric</code> used for scaling, and other <code>relevant inputs</code> for the autoscaling decision-making process.<!-- -->
<ol>
<li><strong>Scaling Target</strong>: The PodAutoscaler determines what resource it should scale. This could be the number of pods, CPU utilization, memory consumption, or any other metric that indicates the workload&#x27;s demand.</li>
<li><strong>Metric for Scaling</strong>: It specifies which metric or metrics should be used to make scaling decisions. For example, it might use CPU utilization to decide when to add or remove pods based on workload demand.</li>
<li><strong>Other Inputs</strong>: The PodAutoscaler considers additional factors beyond just the scaling metric. These could include constraints, policies, or thresholds that influence scaling decisions. For instance, it might have rules to prevent scaling beyond a certain limit or to ensure a minimum number of pods are always running.</li>
</ol>
</li>
<li>PodAutoscalers are automatically created from Revisions by default.</li>
</ul>
</li>
<li><strong>Metric</strong>:<!-- -->
<ul>
<li>API: <code>metrics.autoscaling.internal.knative.dev</code></li>
<li>This API controls the collector of the autoscaler, determining which service to scrape data from, how to aggregate it, and other related aspects.<!-- -->
<ol>
<li><strong>Collector Control</strong>: The API controls the collector component of the autoscaler. The collector is responsible for gathering data related to the performance and behavior of the services being monitored for autoscaling.</li>
<li><strong>Data Scraping</strong>: It determines which service or services the autoscaler should scrape data from. This involves collecting relevant metrics such as CPU utilization, request latency, or throughput from the specified services.</li>
<li><strong>Aggregation</strong>: The API defines how the collected data should be aggregated. This could involve calculating averages, sums, or other statistical measures over a specific time window to provide a meaningful representation of the service&#x27;s performance.</li>
<li><strong>Other Related Aspects</strong>: Beyond data collection and aggregation, the API likely handles other aspects such as data retention policies, thresholds for triggering scaling actions, and configurations for interacting with the autoscaler&#x27;s decision-making process.</li>
</ol>
</li>
<li>Metrics are automatically generated from PodAutoscalers by default.</li>
</ul>
</li>
<li><strong>ServerlessServices</strong> (SKS):<!-- -->
<ul>
<li>API: <code>serverlessservices.networking.internal.knative.dev</code></li>
<li>It&#x27;s an abstraction layer built on top of Kubernetes Services, managing the data flow and the switch between using the activator as a buffer or routing directly to application instances.</li>
<li>SKS creates two Kubernetes services for each revision: a public service and a private service.</li>
<li>The private service points to the application instances, while the public service endpoints are managed directly by the SKS reconciler.</li>
<li>SKS operates in two modes: Serve and Proxy.<!-- -->
<ol>
<li>In <strong>Serve mode</strong>, traffic flows directly to the revision&#x27;s pods.</li>
<li>In <strong>Proxy mode</strong>, traffic is directed to activators.</li>
</ol>
</li>
<li>ServerlessServices are created from PodAutoscalers.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-up-and-down-steady-state">Scaling up and down (steady state)<a href="#scaling-up-and-down-steady-state" class="hash-link" aria-label="Direct link to Scaling up and down (steady state)" title="Direct link to Scaling up and down (steady state)">​</a></h3>
<p><img loading="lazy" alt="steady state" src="/docs/assets/images/04-steady-state-62cf2df517223eaaedf233840e41a74c.png" width="783" height="591" class="img_ev3q"></p>
<ul>
<li><strong>Steady State Operation</strong>:<!-- -->
<ul>
<li>The autoscaler operates continuously at a steady state.</li>
<li>It regularly scrapes data from the currently active revision pods to monitor their performance.</li>
</ul>
</li>
<li><strong>Dynamic Adjustment</strong>:<!-- -->
<ul>
<li>As incoming requests flow into the system, the scraped values of performance metrics change accordingly.</li>
<li>Based on these changing metrics, the autoscaler dynamically adjusts the scale of the revision.</li>
</ul>
</li>
<li><strong>SKS Functionality</strong>:<!-- -->
<ul>
<li>The ServerlessServices (SKS) component keeps track of changes to the deployment&#x27;s size.</li>
<li>It achieves this by monitoring the private service associated with the deployment.</li>
</ul>
</li>
<li><strong>Public Service Update</strong>:<!-- -->
<ul>
<li>SKS updates the public service based on the changes detected in the deployment&#x27;s size.</li>
<li>This ensures that the public service endpoints accurately reflect the available instances of the revision.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-to-zero">Scaling to zero<a href="#scaling-to-zero" class="hash-link" aria-label="Direct link to Scaling to zero" title="Direct link to Scaling to zero">​</a></h3>
<p><img loading="lazy" alt="Scaling to zero" src="/docs/assets/images/05-scaling-to-zero-edbbc4a96b34af7d03439022eaf00ecc.png" width="811" height="500" class="img_ev3q"></p>
<ul>
<li><strong>Scaling to Zero Process</strong> (1):<!-- -->
<ul>
<li>A revision scales down to zero when there are no more requests in the system.</li>
<li>All data collected by the autoscaler from revision pods and the activator reports zero concurrency, indicating no active requests.</li>
</ul>
</li>
<li><strong>Activator Preparation</strong>:<!-- -->
<ul>
<li>Before removing the last pod of the revision, the system ensures that the activator is in the path and reachable.</li>
</ul>
</li>
<li><strong>Proxy Mode Activation</strong> (4.1):<!-- -->
<ul>
<li>The autoscaler, which initiated the decision to scale to zero, directs the SKS to switch to Proxy mode.</li>
<li>In Proxy mode, all incoming traffic is routed to the activators.</li>
</ul>
</li>
<li><strong>Public Service Probing</strong>:<!-- -->
<ul>
<li>The SKS&#x27;s public service is probed continuously to ensure it returns responses from the activator.</li>
<li>Once the public service reliably returns responses from the activator and a configurable grace period (set via scale-to-zero-grace-period) has elapsed,</li>
</ul>
</li>
<li><strong>Final Scaling Down</strong> (5):<!-- -->
<ul>
<li>The last pod of the revision is removed, marking the successful scaling down of the revision to zero instances.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-from-zero">Scaling from zero<a href="#scaling-from-zero" class="hash-link" aria-label="Direct link to Scaling from zero" title="Direct link to Scaling from zero">​</a></h3>
<p><img loading="lazy" alt="Scaling from zero" src="/docs/assets/images/06-scaling-from-zero-95be865fd7ac19f2617d836ffb91726b.png" width="770" height="527" class="img_ev3q"></p>
<ul>
<li><strong>Scaling Up Process</strong>:<!-- -->
<ul>
<li>If a revision is scaled to zero and a request arrives for it, the system needs to scale it up.</li>
<li>As the SKS is in Proxy mode, the request reaches the activator.</li>
</ul>
</li>
<li><strong>Request Handling</strong>:<!-- -->
<ul>
<li>The activator counts the incoming request and reports its appearance to the autoscaler (2.1).</li>
<li>It then buffers the request and monitors the SKS&#x27;s private service for endpoints to appear (2.2).</li>
</ul>
</li>
<li><strong>Autoscaling Cycle</strong> (3):<!-- -->
<ul>
<li>The autoscaler receives the metric from the activator and initiates an autoscaling cycle.</li>
<li>This process determines the desired number of pods based on the incoming request.</li>
</ul>
</li>
<li><strong>Scaling Decision</strong> (4):<!-- -->
<ul>
<li>The autoscaling process concludes that at least one pod is needed to handle the incoming request.</li>
</ul>
</li>
<li><strong>Scaling Up Instructions</strong> (5.1):<!-- -->
<ul>
<li>The autoscaler instructs the revision&#x27;s deployment to scale up to N &gt; 0 replicas to accommodate the increased demand.</li>
</ul>
</li>
<li><strong>Serve Mode Activation</strong> (5.2):<!-- -->
<ul>
<li>The autoscaler switches the SKS into Serve mode, directing traffic to the revision&#x27;s pods directly once they are up.</li>
</ul>
</li>
<li><strong>Endpoint Probing</strong>:<!-- -->
<ul>
<li>The activator monitors the SKS&#x27;s private service for the appearance of endpoints.</li>
<li>Once the endpoints come up and pass the probe successfully, the respective address is considered healthy and used to route the buffered request and any additional requests that arrived in the meantime (8.2).</li>
</ul>
</li>
<li><strong>Successful Scaling Up</strong>:<!-- -->
<ul>
<li>The revision has successfully scaled up from zero to handle the incoming request.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>In summary, we&#x27;ve explored the core concepts of Knative Serving, from its architecture to scaling mechanisms. Next, we&#x27;ll dive into practical implementation in our upcoming blog. Also, stay tuned for the integration of the serverless component into the <a href="https://app.wedaa.tech/" target="_blank" rel="noopener noreferrer">WeDAA</a> Platform, making prototyping and deployment faster and easier than ever.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/architecture">architecture</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-native">cloud-native</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/serverless">Serverless</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-computing">cloud computing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/knative">knative</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/kubernetes">kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/knative-serving">Knative-serving</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Building Microservices architecture using GoMicro"><link itemprop="image" href="https://bairesdev.mo.cloudinary.net/blog/2023/08/golang.jpg?tx=w_1920,q_auto"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/docs/blog/2024/04/17/Go-Micro">Microservice architecture using GoMicro</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-17T00:00:00.000Z" itemprop="datePublished">April 17, 2024</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><p>In today&#x27;s scenario, we are seeing a shift from the monolithic landscape to microservice landscape. In simple words it can be termed as breaking a complex problem into smaller parts and making it easier to manage and develop. In Go to make this easier there is a framework GO MICRO - a helpful framework for building microservice applications with the Go programming language.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-microservice-architecture">Why Microservice Architecture<a href="#why-microservice-architecture" class="hash-link" aria-label="Direct link to Why Microservice Architecture" title="Direct link to Why Microservice Architecture">​</a></h3>
<p>Imagine a library where all the books used to be stacked in one massive room. It would be chaotic trying to find the book you needed among the towering shelves. But now, picture this library transformed into a series of smaller rooms, each dedicated to a specific genre—mystery, romance, science fiction, and so on. Each room is organized neatly, making it easier for readers to find the books they&#x27;re looking for without getting lost in the sea of literature. This is similar to how microservices work in software—they break down complex applications into smaller, specialized components, making it simpler for developers to manage and maintain the software.</p>
<p>Now how do we build them??</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="meet-gomicro---a-framework-for-distributed-systems-development">Meet GOMICRO - A framework for distributed systems development<a href="#meet-gomicro---a-framework-for-distributed-systems-development" class="hash-link" aria-label="Direct link to Meet GOMICRO - A framework for distributed systems development" title="Direct link to Meet GOMICRO - A framework for distributed systems development">​</a></h2>
<p>In the world of microservices, Go Micro is like your trusty sidekick. It helps developers build and manage microservices without all the headaches of doing it from scratch. Think of it as a toolbox full of handy tools to make building microservices easier and faster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-go-micro-helps-us">How Go Micro helps us??<a href="#how-go-micro-helps-us" class="hash-link" aria-label="Direct link to How Go Micro helps us??" title="Direct link to How Go Micro helps us??">​</a></h3>
<ul>
<li>
<p><strong>Authentication and Authorization</strong> - Security is paramount in any architecture.Gomicro provide authorization.It seamlessly integrates with authentication providers like Keycloak, serving as a middleware to authenticate incoming requests.</p>
</li>
<li>
<p><strong>Service Discovery</strong> - Effective communication among microservices necessitates a reliable service discovery mechanism. Go Micro simplifies this with built-in support for mdns (Multicast DNS) and offers integrable libraries (plugins) for popular options such as Eureka, Etcd, Consul, and NATS, among others.</p>
</li>
<li>
<p><strong>Messaging</strong> - Messaging is an important aspect in the microservice architecture and event driven architectures. Go Micro eases the implementation of pub-sub models and other messaging paradigms with its plugin-based approach. Whether it&#x27;s HTTP event message brokering or support for NATS, RabbitMQ, or Kafka, Go Micro has you covered.</p>
</li>
<li>
<p><strong>Protocols</strong> - Go Micro supports communication via HTTP and RPC (Remote Procedure Call), providing abstractions for synchronous communication. This flexibility enables developers to choose the most suitable communication protocol for their specific use cases.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tutorial">Tutorial<a href="#tutorial" class="hash-link" aria-label="Direct link to Tutorial" title="Direct link to Tutorial">​</a></h2>
<ol>
<li>
<p><strong>Visit WeDAA</strong>: Go to <a href="https://app.wedaa.tech/canvastocode" target="_blank" rel="noopener noreferrer">WeDAA</a>.</p>
</li>
<li>
<p><strong>Choose GoMicro Application</strong>: Navigate to the service tab in the sidebar and select Go. Drag and drop it onto the canvas.</p>
</li>
<li>
<p><strong>Connect a Database and Add Authentication</strong>: Connect a database to the application. Additionally, add authentication to secure the  application. WeDAA supports Keycloak as an authentication IDP.</p>
</li>
</ol>
<p><img loading="lazy" alt="Sample GOMICRO WeDAA Architecture" src="/docs/assets/images/go_micro_one-f2b63d82818c11bb0976bc6d9c85b011.png" width="1848" height="939" class="img_ev3q"></p>
<ol start="4">
<li><strong>Fill in Required Details</strong>: Provide necessary details for the service and database connection.</li>
</ol>
<p><img loading="lazy" alt="Sample GOMICRO WeDAA Architecture" src="/docs/assets/images/go_micro_two-2a7096b9f917aa1abe769d5d513eaa1e.png" width="1843" height="938" class="img_ev3q"></p>
<ol start="5">
<li><strong>Validate and Review</strong>: Click on validate to review the setup. Ensure everything is configured correctly.</li>
</ol>
<p><img loading="lazy" alt="Sample GOMICRO WeDAA Architecture" src="/docs/assets/images/go_micro_three-8da8e0e5ad804ee0b79f8b7d0372ebab.png" width="1847" height="939" class="img_ev3q"></p>
<ol start="6">
<li><strong>Cloud Service Setup (Optional)</strong>: Weeda has support for Azure, AWS and minikube.We can opt for one and fill in the necessary details to deploy applications in the specific cloud provider.we can skip this step for now by selecting none.</li>
</ol>
<p><img loading="lazy" alt="Sample GOMICRO WeDAA Architecture" src="/docs/assets/images/go_micro_four-b8c2c9bb30e32b1137fccd8d67b48d42.png" width="1850" height="936" class="img_ev3q"></p>
<ol start="7">
<li><strong>Generate Project Zip</strong>: After submission, a zip file containing the project will be generated.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-quickstart-guide">Application Quickstart Guide<a href="#application-quickstart-guide" class="hash-link" aria-label="Direct link to Application Quickstart Guide" title="Direct link to Application Quickstart Guide">​</a></h3>
<ol>
<li>
<p><strong>Prerequisites</strong>: Ensure Docker is set up in advance if Keycloak is not configured as standalone or if PostgreSQL is not set up separately. Keycloak and PostgreSQL provided are Dockerized containers.</p>
</li>
<li>
<p><strong>Start Keycloak and PostgreSQL</strong>:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   docker compose -f docker/keycloak.yml up -d</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   docker compose -f docker/postgresql.yml up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>
<p><strong>Start the Go Service</strong>: Once Keycloak and PostgreSQL services are up, start the Go service.</p>
</li>
<li>
<p><strong>Install Dependencies and Run the Service</strong>:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   go mod tidy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   go run .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will install any required dependencies and then run the Go service.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-the-code">Understanding the code<a href="#understanding-the-code" class="hash-link" aria-label="Direct link to Understanding the code" title="Direct link to Understanding the code">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Setconfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	migrate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">MigrateAndCreateDatabase</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SetClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">InitializeDb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	port </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetVal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GO_MICRO_SERVICE_PORT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	srv </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> micro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		micro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mhttp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewServer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	opts1 </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">micro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Option</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		micro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;backendone&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		micro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;latest&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		micro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;:&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	srv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">opts1</span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	r </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> mux</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">StrictSlash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">corsMiddleware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token function" style="color:rgb(130, 170, 255)">registerRoutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">		</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> handlers http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Handler </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> r</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> micro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">RegisterHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">srv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> handlers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		logger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> srv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">		logger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p><strong>Config Initialization</strong> - The application begins by loading configuration values from externalized YAML files into the environment. This ensures that the application has access to the necessary configuration parameters.</p>
</li>
<li>
<p><strong>Database Migration</strong> - WeDAA supports migration for PostgreSQL databases. Using the go-migrate package library, a new database is created and data initialization is performed. This ensures that the database is properly set up and populated with initial data.</p>
</li>
<li>
<p><strong>Authentication Setup</strong> - The code proceeds by setting up the authentication client,here Keycloak is being used as the identity provider (IDP) for authentication. This involves establishing a connection to Keycloak.</p>
</li>
<li>
<p><strong>Microservice Setup</strong> - The micro.NewService function is a notation used by GoMicro to set up the microservice. Here, configurations are provided to the microservice via options. This step initializes the microservice and prepares it to handle incoming requests.</p>
</li>
<li>
<p><strong>Router Setup</strong> - The code utilizes the mux router to create a routing setup. This involves defining endpoints and their corresponding handlers. The router is then registered with GoMicro, indicating that the microservice should use this router to handle incoming requests.</p>
</li>
<li>
<p><strong>Application Execution</strong> - Finally, the application is run. This step starts the microservice, allowing it to listen for incoming requests and handle them according to the defined routing setup.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>Go Micro leverages Go interfaces for each distributed system abstraction, rendering them pluggable and runtime-agnostic. This inherent flexibility allows developers to seamlessly integrate various underlying technologies, optimizing microservice development in a clean and efficient manner.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/go">go</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/prototyping">prototyping</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Overview on Knative"><link itemprop="image" href="https://dzrge5zzbsh6q.cloudfront.net/Enterprise-Software-Development-with-Knative-1024x614.jpg.webp"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/docs/blog/2024/04/13/overview-on-knative">Dive into Knative—Explore Serverless with Kubernetes</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-13T00:00:00.000Z" itemprop="datePublished">April 13, 2024</time> · <!-- -->8 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-serverless">What is serverless?<a href="#what-is-serverless" class="hash-link" aria-label="Direct link to What is serverless?" title="Direct link to What is serverless?">​</a></h2>
<p>Serverless is a cloud-native development model that allows developers to build and run applications without having to manage servers.</p>
<p>There are still servers in serverless, but they are abstracted away from app development. A cloud provider handles the routine work of provisioning, maintaining, and scaling the server infrastructure. Developers can simply package their code in containers for deployment.</p>
<p>Once deployed, serverless apps respond to demand and automatically scale up and down as needed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="serverless-computing-a-catering-service-analogy">Serverless Computing: A Catering Service Analogy<a href="#serverless-computing-a-catering-service-analogy" class="hash-link" aria-label="Direct link to Serverless Computing: A Catering Service Analogy" title="Direct link to Serverless Computing: A Catering Service Analogy">​</a></h3>
<p><img loading="lazy" alt="Catering Service Analogy" src="/docs/assets/images/01-catering-service-analogy-adaf44c7098d69ce237b4b79d9ce91c5.png" width="1480" height="722" class="img_ev3q"></p><p align="center"><a href="https://www.freepik.com/premium-vector/catering-concept-illustration-idea-food-service-hotel-event-restaurant-banquet-party-catering-service-web-banner-illustration_10275389.htm" target="_blank" rel="noopener noreferrer">Catering Service Analogy</a></p><p></p>
<p>Imagine you&#x27;re hosting a dinner party. In a traditional hosting scenario, you&#x27;d have to plan everything from cooking the food to setting the table and serving your guests. This is like managing servers in traditional computing – you have to handle all the details yourself.</p>
<p>Now, consider a serverless approach as hiring a catering service for your party. You tell them what you need, and they take care of everything – from cooking the food to setting up and serving. You don&#x27;t have to worry about the kitchen logistics or cleaning up afterward; you can focus on enjoying the party with your guests. Similarly, in serverless computing, you provide your code, and the cloud provider takes care of the infrastructure, scaling, and management, allowing you to focus on writing and improving your application.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-powered-serverless-introducing-knative">Kubernetes-Powered Serverless: Introducing Knative<a href="#kubernetes-powered-serverless-introducing-knative" class="hash-link" aria-label="Direct link to Kubernetes-Powered Serverless: Introducing Knative" title="Direct link to Kubernetes-Powered Serverless: Introducing Knative">​</a></h3>
<p><img loading="lazy" alt="Serverless Framework Knative" src="/docs/assets/images/02-serverless-framework-knative-257bb2f43332d877463ef0e79344d262.png" width="1895" height="849" class="img_ev3q"></p><p align="center"><a href="https://www.serverless.com/blog/serverless-framework-knative-component" target="_blank" rel="noopener noreferrer">Serverless Framework Knative</a></p><p></p>
<p>In the rapidly evolving landscape of cloud computing, serverless technology has become increasingly popular for its simplicity in deploying applications without worrying about infrastructure. Knative, built on top of Kubernetes (k8s), extends the power of Kubernetes to manage serverless workloads seamlessly. While major cloud providers like AWS, Google Cloud, and Microsoft Azure offer their serverless solutions, Knative stands out as an open-source, platform-agnostic framework.</p>
<p>Collaboratively developed by industry leaders like Google and Red Hat, Knative abstracts away the complexities of deploying, scaling, and managing containerized applications, allowing developers to focus solely on writing code without worrying about infrastructure management. Knative simplifies serverless deployments across diverse cloud environments, revolutionizing the way applications are developed and deployed in modern cloud-native architectures.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exploring-knative-features-simplifying-serverless-deployment">Exploring Knative Features: Simplifying Serverless Deployment<a href="#exploring-knative-features-simplifying-serverless-deployment" class="hash-link" aria-label="Direct link to Exploring Knative Features: Simplifying Serverless Deployment" title="Direct link to Exploring Knative Features: Simplifying Serverless Deployment">​</a></h3>
<p>Serverless refers to running back-end programs and processes in the cloud. Serverless works on an as-used basis, meaning that companies only use what they pay for. Knative is a platform-agnostic solution for running serverless deployments.</p>
<p><img loading="lazy" alt="Knative Features" src="/docs/assets/images/03-knative-features-ab0d3d0da33f8a2fcf5e74219d0e8fff.png" width="1395" height="539" class="img_ev3q"></p>
<ul>
<li>
<p><strong>Simpler Abstractions</strong>: simplifies the YAML configuration process by providing custom CRDs (Custom Resource Definitions),
streamlining the abstraction layers and making development workflows more straightforward.</p>
</li>
<li>
<p><strong>Autoscaling</strong>: autoscaling feature seamlessly adjusts resource allocation, scaling applications down to zero and up from zero based on demand.</p>
</li>
<li>
<p><strong>Progressive Rollouts</strong>: Customize your rollout strategy with Knative&#x27;s Progressive Rollouts feature, offering flexibility to select the ideal
approach based on your specific requirements.</p>
</li>
<li>
<p><strong>Event Integrations</strong>: Easily manage events from diverse sources with Knative&#x27;s Event Integrations, streamlining event handling for seamless integration.</p>
</li>
<li>
<p><strong>Handle Events</strong>: Effortlessly trigger handlers from the event broker with Knative&#x27;s event handling capabilities, ensuring seamless integration
and streamlined workflow.</p>
</li>
<li>
<p><strong>Plugable</strong>: Knative&#x27;s pluggable architecture ensures seamless integration and extension within the Kubernetes ecosystem, providing
flexibility and scalability for diverse use cases.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="knative-components">Knative Components<a href="#knative-components" class="hash-link" aria-label="Direct link to Knative Components" title="Direct link to Knative Components">​</a></h2>
<p>Knative has two main components that empower teams working with Kubernetes. Serving and
Eventing work together to automate and manage tasks and applications.</p>
<p><img loading="lazy" alt="Serving Eventing" src="/docs/assets/images/04-serving-eventing-a2e56a6edb5b03ded58da4a919040440.png" width="932" height="353" class="img_ev3q"></p>
<ul>
<li><strong>Knative Serving</strong>: Allows running serverless containers in Kubernetes with ease. Knative takes care of the details of networking,
autoscaling (even to zero), and revision tracking. Teams can focus on core logic using any programming language.</li>
<li><strong>Knative Eventing</strong>: Allows universal subscription, delivery and management of events. Build modern apps by attaching compute to a
data stream with declarative event connectivity and developer friendly object models.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="knative-serving">Knative Serving<a href="#knative-serving" class="hash-link" aria-label="Direct link to Knative Serving" title="Direct link to Knative Serving">​</a></h3>
<p>Knative Serving defines a set of objects as Kubernetes Custom Resource Definitions (CRDs). These objects get used to define and control how your serverless workload behaves on the cluster:</p>
<p><img loading="lazy" alt="Knative Serving" src="/docs/assets/images/05-knative-serving-81d75b163b72ae38758471ef4605a10b.png" width="644" height="432" class="img_ev3q"></p><p align="center">Savita Ashture, <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">CC BY-SA 4.0</a></p><p></p>
<ul>
<li>
<p><strong>Service</strong>: A Knative Service describes a combination of a route and a configuration as shown above. It is a higher-level entity that does not provide any additional functionality. It should make it easier to deploy an application quickly and make it available. You can define the service to always route traffic to the latest revision or a pinned revision.</p>
</li>
<li>
<p><strong>Route</strong>: The Route describes how a particular application gets called and how the traffic gets distributed across the different revisions. There is a high chance that several revisions can be active in the system at any given time based on the use case in those scenarios. It&#x27;s the responsibility of routes to split the traffic and assign to revisions.</p>
</li>
<li>
<p><strong>Configuration</strong>: The Configuration describes what the corresponding deployment of the application should look like. It provides a clean separation between code and configuration and follows the Twelve-Factor App methodology. Modifying a configuration creates a new revision.</p>
</li>
<li>
<p><strong>Revision</strong>: The Revision represents the state of a configuration at a specific point in time. A revision, therefore, gets created from the configuration. Revisions are immutable objects, and you can retain them for as long as useful. Several revisions per configuration may be active at any given time, and you can automatically scale up and down according to incoming traffic.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="knative-serving-focuses-on">Knative Serving focuses on:<a href="#knative-serving-focuses-on" class="hash-link" aria-label="Direct link to Knative Serving focuses on:" title="Direct link to Knative Serving focuses on:">​</a></h4>
<ul>
<li>Rapid deployment of serverless containers.</li>
<li>Autoscaling includes scaling pods down to zero.</li>
<li>Support for multiple networking layers such as Ambassador, Contour, Kourier, Gloo, and Istio for integration into existing environments.</li>
<li>Give point-in-time snapshots of deployed code and configurations.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="knative-eventing">Knative Eventing<a href="#knative-eventing" class="hash-link" aria-label="Direct link to Knative Eventing" title="Direct link to Knative Eventing">​</a></h3>
<p>Knative Eventing is a collection of APIs that enable you to use an event-driven architecture with your applications. You can create components that route events from event producers to event consumers, known as sinks, that receive events.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use-cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use-cases" title="Direct link to Use-cases">​</a></h4>
<p>General areas of application are:</p>
<ul>
<li>
<p>Publishing an event without creating a consumer. You can send events to a broker as an HTTP POST, and use binding to decouple the destination configuration from your application that produces events.</p>
</li>
<li>
<p>Consuming an event without creating a publisher. You can use a trigger to consume events from a broker based on event attributes.</p>
</li>
<li>
<p>IoT, network monitoring, application monitoring, website testing and validation, and mobile app front-end processes that act as event generators.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-knative-eventing-when">Use Knative eventing when:<a href="#use-knative-eventing-when" class="hash-link" aria-label="Direct link to Use Knative eventing when:" title="Direct link to Use Knative eventing when:">​</a></h4>
<ul>
<li>
<p>When you want to publish an event without creating a consumer. You can send events to a broker as an HTTP POST, and use binding to decouple the destination configuration from your application that produces events.</p>
</li>
<li>
<p>When you want to consume an event without creating a publisher. You can use a trigger to consume events from a broker based on event attributes. The application receives events as an HTTP POST.</p>
</li>
<li>
<p>When you want to create components that route events from event producers to event consumers, known as sinks, that receive events. Sinks can also be configured to respond to HTTP requests by sending a response event.</p>
</li>
</ul>
<p><img loading="lazy" alt="Knative Eventing" src="/docs/assets/images/06-knative-eventing-eda6ccc26ee2faba5845f2bcd75bf703.png" width="880" height="366" class="img_ev3q"></p><p align="center"><a href="https://dev.to/ashokan/knative-eventing-e95" target="_blank" rel="noopener noreferrer">Eventing Components</a></p><p></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="components">Components<a href="#components" class="hash-link" aria-label="Direct link to Components" title="Direct link to Components">​</a></h4>
<ul>
<li>
<p><strong>Sources</strong>: Knative eventing sources are objects that generate events and send them to a sink. They are created by instantiating a custom resource (CR) from a source object. There are different types of sources, such as PingSource, ApiServerSource, KafkaSource, etc., depending on the event producer.</p>
</li>
<li>
<p><strong>Sinks</strong>: Knative eventing sinks are objects that receive events from sources or other components. They can be Addressable or Callable resources that have an address defined in their status.address.url field. Addressable sinks can receive and acknowledge an event delivered over HTTP, while Callable sinks can also respond to HTTP requests by sending a response event. Knative Services, Channels, and Brokers are all examples of sinks.</p>
</li>
<li>
<p><strong>Brokers</strong>: Knative eventing brokers are objects that define an event mesh for collecting a pool of events. Brokers provide a discoverable endpoint for event ingress, and use triggers for event delivery. Event producers can send events to a broker by posting the event.</p>
</li>
<li>
<p><strong>Channels</strong>: Channels are custom resources that define a single event-forwarding and persistence layer. You can connect channels to various backends for sourcing events, such as In-Memory, Kafka, or GCP PubSub. You can also fan-out received events, through subscriptions, to multiple destinations, or sinks. Examples of sinks include brokers and Knative services.</p>
</li>
<li>
<p><strong>Subscriptions</strong>: Knative subscriptions are objects that enable event delivery from a channel to an event sink, also known as a subscriber. A subscription specifies the channel and the sink to deliver events to, as well as some sink-specific options, such as how to handle failures.</p>
</li>
<li>
<p><strong>Triggers</strong>: Knative Triggers are objects that enable seamless integration with external event sources, allowing applications to react dynamically to incoming events, fostering the development of scalable, event-driven architectures.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>In this overview, we&#x27;ve explored serverless computing with Knative on Kubernetes, covering core concepts, features, and components. Stay tuned for practical implementations and real-world use cases in upcoming blogs, unlocking Knative&#x27;s full potential for your projects. With Knative, the future of serverless on Kubernetes is brighter than ever.</p>
<p>Furthermore, I&#x27;m excited to announce that our platform, <a href="https://app.wedaa.tech/" target="_blank" rel="noopener noreferrer">WeDAA</a>, will be hosting these upcoming blogs. WeDAA is committed to providing innovative solutions, and soon, we&#x27;ll be incorporating serverless capabilities into our platform. Keep an eye out for our future updates, as we continue to evolve and enhance our services to meet your needs.</p>
<p>Continue your exploration of Knative by diving into our next blog on Knative Serving <a href="https://www.wedaa.tech/docs/blog/2024/05/01/knative-serving-01" target="_blank" rel="noopener noreferrer">Definitive Guide to Knative Serving—A Deep Dive into Theory and Architecture</a>!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/architecture">architecture</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-native">cloud-native</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/serverless">Serverless</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/cloud-computing">cloud computing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/knative">knative</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/kubernetes">kubernetes</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Building event driven microservices architecture with RabbitMQ"><link itemprop="image" href="https://www.wedaa.tech/docs/img/blog/rabbitmq/rabbitmq.png"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/docs/blog/2024/01/15/rabbitmq">Building event driven microservices architecture with RabbitMQ</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-01-15T00:00:00.000Z" itemprop="datePublished">January 15, 2024</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-story">The Story<a href="#the-story" class="hash-link" aria-label="Direct link to The Story" title="Direct link to The Story">​</a></h2>
<p><img loading="lazy" alt="Sample Message Broker App" src="/docs/assets/images/message-brokers-app-ffb34699577c2083c49c9671356ac45b.png" width="3388" height="1408" class="img_ev3q"></p>
<p>Imagine we&#x27;re building a simple e-commerce application. When a customer places an order, it&#x27;s not instantly whisked away by elves. Instead, the order details – a message filled with product information, shipping address, and payment details – gets sent to a queue managed by a message broker.</p>
<p>Meanwhile, our order processing system sits like a hungry rabbit, constantly checking the queue for new messages. Once it grabs an order message, it springs into action: verifying payment, notifying the warehouse, and sending updates to the customer. All without the two systems ever needing to directly talk to each other!</p>
<p>This decoupling is the superpower of message brokers. Applications don&#x27;t need to know the specifics of each other&#x27;s internal workings. They simply send and receive messages, leaving the orchestration to the broker. This makes systems more flexible, scalable, and resilient.</p>
<p>Let&#x27;s delve deeper into this rabbit hole, using RabbitMQ as our trusty guide.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-technology">The Technology<a href="#the-technology" class="hash-link" aria-label="Direct link to The Technology" title="Direct link to The Technology">​</a></h2>
<p>RabbitMQ is a popular open-source message broker, and it&#x27;s a great starting point to understand the magic behind these event-driven systems.</p>
<ul>
<li>It is used worldwide at small startups and large enterprises.</li>
<li>It is lightweight and easy to deploy on premises and in the cloud.</li>
<li>It can be deployed in distributed and federated configurations to meet high-scale, high-availability requirements.</li>
<li>It runs on many operating systems and cloud environments, and provides a wide range of developer tools for most popular languages.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-concepts">The Concepts<a href="#the-concepts" class="hash-link" aria-label="Direct link to The Concepts" title="Direct link to The Concepts">​</a></h3>
<p><img loading="lazy" src="https://www.rabbitmq.com/img/tutorials/python-three.png" alt="RabbitMQ Concepts" class="img_ev3q"></p>
<ul>
<li>Message: It is the fundamental unit of communication in RabbitMQ. It contains the data being sent from the producer to the consumer. It is like a post carrying a message.</li>
<li>Producer: A producer is an application or component that sends messages to RabbitMQ. It is like a person sending the post.</li>
<li>Consumer: A consumer is an application or component that receives and processes messages from RabbitMQ. It is a person receiving the post.</li>
<li>Queue: A queue is a buffer that stores messages until they are consumed. Messages are placed in queues by producers and retrieved by consumers. It is a postbox that stores messages of a person.</li>
<li>Exchange: An exchange is a routing mechanism that receives messages from producers and routes them to queues. It is like a post office.</li>
<li>Routing Key: A routing key is a property of a message that is used by exchanges to determine which queues should receive the message. This is like a mailing address for a post.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-tutorial">The Tutorial<a href="#the-tutorial" class="hash-link" aria-label="Direct link to The Tutorial" title="Direct link to The Tutorial">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-prototype-from-wedaa">Generate prototype from WeDAA<a href="#generate-prototype-from-wedaa" class="hash-link" aria-label="Direct link to Generate prototype from WeDAA" title="Direct link to Generate prototype from WeDAA">​</a></h3>
<p>Use below Architecture as reference and generate a project from <a href="https://app.wedaa.tech/canvastocode" target="_blank" rel="noopener noreferrer">WeDAA</a></p>
<p>All the code mentioned in the blog will be generated by WeDAA. It can be further extended as necessary.</p>
<p><img loading="lazy" alt="Sample RabbitMQ WeDAA Architecture" src="/docs/assets/images/rabbitmq-demo-arch-2c363c76b779748984b215aeeec002ea.png" width="2998" height="1709" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rabbitmq-configuration">RabbitMQ Configuration<a href="#rabbitmq-configuration" class="hash-link" aria-label="Direct link to RabbitMQ Configuration" title="Direct link to RabbitMQ Configuration">​</a></h3>
<p><strong>RabbitMQConfigOrdersToInventory</strong> class in orders service registers Queue, Exchange, Binding and Message Converters are as beans for auto-configuration in Spring AMPQ.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class RabbitMQConfigOrdersToInventory {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public static final String QUEUE = &quot;OrdersToInventory_message_queue&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public static final String EXCHANGE = &quot;OrdersToInventory_message_exchange&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public static final String ROUTING_KEY = &quot;OrdersToInventory_message_routingKey&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public Queue queueOrdersToInventory() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return new Queue(QUEUE);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public TopicExchange exchangeOrdersToInventory() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return new TopicExchange(EXCHANGE);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public Binding bindingOrdersToInventory() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return BindingBuilder.bind(this.queueOrdersToInventory()).to(this.exchangeOrdersToInventory()).with(ROUTING_KEY);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public MessageConverter messageConverter() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return new Jackson2JsonMessageConverter();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public AmqpTemplate template(ConnectionFactory connectionFactory) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        RabbitTemplate template = new RabbitTemplate(connectionFactory);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        template.setMessageConverter(messageConverter());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return template;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-producer">Message Producer<a href="#message-producer" class="hash-link" aria-label="Direct link to Message Producer" title="Direct link to Message Producer">​</a></h3>
<p><strong>RabbitMQProducerOrdersToInventory</strong> class in orders service sends a message to the exchange every 15 seconds.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Scheduled(cron = &quot;0/15 * * * * *&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void publishMessage() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    RabbitMessageModel message = new RabbitMessageModel();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    message.setMessage(&quot;Publishing this message from orders with key: &quot; + RabbitMQConfigOrdersToInventory.QUEUE);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    message.setDateTime(new Date());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    template.convertAndSend(RabbitMQConfigOrdersToInventory.EXCHANGE, RabbitMQConfigOrdersToInventory.ROUTING_KEY, message);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    logger.info(&quot;Message Published Successfully&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-consumer">Message Consumer<a href="#message-consumer" class="hash-link" aria-label="Direct link to Message Consumer" title="Direct link to Message Consumer">​</a></h3>
<p><strong>RabbitMQConsumerOrdersToInventory</strong> in the inventory service starts receiving the messages as the messages are sent by the Producer.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">msgs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> channel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Consume</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    queueName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">forever </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">chan</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">bool</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">go</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> d </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">range</span><span class="token plain"> msgs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        logger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Infof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Received Message: %s\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain">forever</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-execution">The execution<a href="#the-execution" class="hash-link" aria-label="Direct link to The execution" title="Direct link to The execution">​</a></h3>
<ol>
<li>
<p>Bootup the RabbitMQ server</p>
<p>WeDAA provides dockerfile for starting RabbitMQ server quickly.
It can be found in both inventory and orders service.</p>
<p>RabbitMQ server can be started using below command from orders service.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker compose -f src/main/docker/rabbitmq.yml up --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>RabbitMQ&#x27;s management console can be accessed on <a href="http://localhost:15672/" target="_blank" rel="noopener noreferrer">http://localhost:15672/</a></p>
<p>Default username: <em>guest</em>, password: <em>guest</em></p>
</li>
<li>
<p>Start the orders service</p>
<p>In the sample architecture, orders service acts as producer.
Start the service using the following command</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the service is started, it can be seen from the logs that messages are sent periodically.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15T20:35:00.015+05:30  INFO 55955 --- [rs-scheduling-1] .o.c.r.RabbitMQProducerOrdersToInventory : Message Published Successfully </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15T20:35:15.008+05:30  INFO 55955 --- [rs-scheduling-1] .o.c.r.RabbitMQProducerOrdersToInventory : Message Published Successfully </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15T20:35:30.003+05:30  INFO 55955 --- [rs-scheduling-1] .o.c.r.RabbitMQProducerOrdersToInventory : Message Published Successfully </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15T20:35:45.002+05:30  INFO 55955 --- [rs-scheduling-1] .o.c.r.RabbitMQProducerOrdersToInventory : Message Published Successfully </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Start the inventory service</p>
<p>In the sample architecture, inventory service acts as consumer.</p>
<p>Build and start the service using the following commands</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod tidy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once started, inventory service starts consuming the messages sent by orders service.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15 20:41:33  file=rabbitmq/RabbitMQConsumerOrdersToInventory.go:51 level=info Received Message: {&quot;id&quot;:1,&quot;message&quot;:&quot;Publishing this message from orders with key: OrdersToInventory_message_queue&quot;,&quot;dateTime&quot;:1705331085013}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15 20:41:33  file=rabbitmq/RabbitMQConsumerOrdersToInventory.go:51 level=info Received Message: {&quot;id&quot;:2,&quot;message&quot;:&quot;Publishing this message from orders with key: OrdersToInventory_message_queue&quot;,&quot;dateTime&quot;:1705331100012}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15 20:41:33  file=rabbitmq/RabbitMQConsumerOrdersToInventory.go:51 level=info Received Message: {&quot;id&quot;:3,&quot;message&quot;:&quot;Publishing this message from orders with key: OrdersToInventory_message_queue&quot;,&quot;dateTime&quot;:1705331115005}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 2024-01-15 20:41:33  file=rabbitmq/RabbitMQConsumerOrdersToInventory.go:51 level=info Received Message: {&quot;id&quot;:4,&quot;message&quot;:&quot;Publishing this message from orders with key: OrdersToInventory_message_queue&quot;,&quot;dateTime&quot;:1705331130001}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Track activity on RabbitMQ management console</p>
</li>
</ol>
<p><img loading="lazy" alt="RabbitMQ Exchange" src="/docs/assets/images/exchange-ec722c1ef354f4fbc7c49ea423a90dd6.png" width="2036" height="1320" class="img_ev3q"></p>
<p><img loading="lazy" alt="RabbitMQ Queue" src="/docs/assets/images/queue-a76c8c5dc445c1d68b11dfddc14b7bed.png" width="2184" height="1464" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-conclusion">The Conclusion<a href="#the-conclusion" class="hash-link" aria-label="Direct link to The Conclusion" title="Direct link to The Conclusion">​</a></h2>
<p>This blog gives a head start on making use of RabbitMQ to orchestrate your event-driven microservice application architectures.</p>
<p>Learn more from: <a href="https://www.rabbitmq.com/getstarted.html" target="_blank" rel="noopener noreferrer">https://www.rabbitmq.com/getstarted.html</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/microservices">microservices</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/messagebrokers">messagebrokers</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/rabbitmq">rabbitmq</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/eventdriven">eventdriven</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/blog/tags/architecture">architecture</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/get-started/quickstart">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developers-guide/introduction">Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/wedaa-tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/orgs/wedaa-tech/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>